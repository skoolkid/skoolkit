<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Migrating from SkoolKit 5 &mdash; SkoolKit 6.0 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SkoolKit 6.0 documentation" href="index.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Supported assemblers" href="assemblers.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="assemblers.html" title="Supported assemblers"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">SkoolKit 6.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Migrating from SkoolKit 5</a><ul>
<li><a class="reference internal" href="#bug-fact-poke">#BUG, #FACT, #POKE</a></li>
<li><a class="reference internal" href="#erefs-refs">#EREFS, #REFS</a></li>
<li><a class="reference internal" href="#pagecontent">[PageContent:*]</a></li>
<li><a class="reference internal" href="#created">Created</a></li>
<li><a class="reference internal" href="#defaultanimationformat">DefaultAnimationFormat</a></li>
<li><a class="reference internal" href="#udgfilename">UDGFilename</a></li>
<li><a class="reference internal" href="#changelog-templates">changelog_* templates</a></li>
<li><a class="reference internal" href="#css-selectors">CSS selectors</a></li>
<li><a class="reference internal" href="#pageheaders-asm-t">PageHeaders:Asm-t</a></li>
<li><a class="reference internal" href="#titles-asm-t">Titles:Asm-t</a></li>
<li><a class="reference internal" href="#bin2tap-py-t">bin2tap.py -t</a></li>
<li><a class="reference internal" href="#skool2ctl-py-a">skool2ctl.py -a</a></li>
<li><a class="reference internal" href="#skool2html-py-w">skool2html.py -w</a></li>
<li><a class="reference internal" href="#udg">Udg</a></li>
<li><a class="reference internal" href="#flip-udgs">flip_udgs()</a></li>
<li><a class="reference internal" href="#rotate-udgs">rotate_udgs()</a></li>
<li><a class="reference internal" href="#parse-image-params">parse_image_params()</a></li>
<li><a class="reference internal" href="#parse-params">parse_params()</a></li>
<li><a class="reference internal" href="#skoolkit5to6-py">skoolkit5to6.py</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="assemblers.html"
                        title="previous chapter">Supported assemblers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="next chapter">Changelog</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/migration.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="migrating-from-skoolkit-5">
<span id="migrating"></span><h1>Migrating from SkoolKit 5<a class="headerlink" href="#migrating-from-skoolkit-5" title="Permalink to this headline">¶</a></h1>
<p>SkoolKit 6 includes some changes that make it incompatible with SkoolKit 5. If
you have developed a disassembly using SkoolKit 5 and find that the SkoolKit
commands no longer work with your control files or skool files, or produce
broken output, look through the following sections for tips on how to migrate
your disassembly to SkoolKit 6.</p>
<div class="section" id="bug-fact-poke">
<h2>#BUG, #FACT, #POKE<a class="headerlink" href="#bug-fact-poke" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">#BUG</span></tt>, <tt class="docutils literal"><span class="pre">#FACT</span></tt> and <tt class="docutils literal"><span class="pre">#POKE</span></tt> macros are not supported in SkoolKit 6.
However, they can be brought back into service by using suitable <a class="reference internal" href="asm.html#replace"><em>&#64;replace</em></a>
directives to convert them into equivalent <a class="reference internal" href="skool-macros.html#link"><em>#LINK</em></a> macros. For example:</p>
<div class="highlight-none"><div class="highlight"><pre>@replace=/#BUG(#[a-zA-Z\d$#]+(?![a-zA-Z\d$#(])|(?![#(A-Z]))/#LINK:Bugs\1(bug)
@replace=/#BUG(?![A-Z])/#LINK:Bugs
</pre></div>
</div>
<p>The first directive replaces <tt class="docutils literal"><span class="pre">#BUG</span></tt> macros that have no link text parameter
(as in <tt class="docutils literal"><span class="pre">This</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">#BUG#bug1.</span></tt>); it may be omitted if all the <tt class="docutils literal"><span class="pre">#BUG</span></tt> macros
in your disassembly have a link text parameter. The second directive replaces
<tt class="docutils literal"><span class="pre">#BUG</span></tt> macros that do have a link text parameter.</p>
<p>The corresponding <tt class="docutils literal"><span class="pre">&#64;replace</span></tt> directives for the <tt class="docutils literal"><span class="pre">#FACT</span></tt> macro are:</p>
<div class="highlight-none"><div class="highlight"><pre>@replace=/#FACT(#[a-zA-Z\d$#]+(?![a-zA-Z\d$#(])|(?![#(A-Z]))/#LINK:Facts\1(fact)
@replace=/#FACT(?![A-Z])/#LINK:Facts
</pre></div>
</div>
<p>And for the <tt class="docutils literal"><span class="pre">#POKE</span></tt> macro:</p>
<div class="highlight-none"><div class="highlight"><pre>@replace=/#POKE(#[a-zA-Z\d$#]+(?![a-zA-Z\d$#(])|(?![#(A-Z]))/#LINK:Pokes\1(poke)
@replace=/#POKE(?![A-Z])/#LINK:Pokes
</pre></div>
</div>
</div>
<div class="section" id="erefs-refs">
<h2>#EREFS, #REFS<a class="headerlink" href="#erefs-refs" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">#EREFS</span></tt> and <tt class="docutils literal"><span class="pre">#REFS</span></tt> macros are not supported in SkoolKit 6.</p>
<p>A near equivalent to the <tt class="docutils literal"><span class="pre">#EREFS</span></tt> macro can be defined by using the
<a class="reference internal" href="asm.html#replace"><em>&#64;replace</em></a> directive thus:</p>
<div class="highlight-none"><div class="highlight"><pre>@replace=/#erefs\i/#IF(#neref\1);;the routine#IF(#neref\1&gt;1)(s) at #FOREACH(EREF\1)||n|#Rn|, | and ||;no other routines;;
@replace=/#neref\i/0#FOREACH(EREF\1)(n,+1)
</pre></div>
</div>
<p>and used like this:</p>
<div class="highlight-none"><div class="highlight"><pre>; This entry point is used by #erefs32769.
</pre></div>
</div>
<p>A near equivalent to the <tt class="docutils literal"><span class="pre">#REFS</span></tt> macro can be defined by using the
<a class="reference internal" href="asm.html#replace"><em>&#64;replace</em></a> directive thus:</p>
<div class="highlight-none"><div class="highlight"><pre>@replace=/#refs\i/#IF(#nref\1);;the routine#IF(#nref\1&gt;1)(s) at #FOREACH(REF\1)||n|#Rn|, | and ||;no other routines;;
@replace=/#nref\i/0#FOREACH(REF\1)(n,+1)
</pre></div>
</div>
<p>and used like this:</p>
<div class="highlight-none"><div class="highlight"><pre>; Used by #refs32768.
</pre></div>
</div>
</div>
<div class="section" id="pagecontent">
<h2>[PageContent:*]<a class="headerlink" href="#pagecontent" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">[PageContent:*]</span></tt> sections are not supported in SkoolKit 6; instead, the
<tt class="docutils literal"><span class="pre">PageContent</span></tt> parameter in the <a class="reference internal" href="ref-files.html#page"><em>[Page:*]</em></a> section should be used.</p>
<p>If you have a <tt class="docutils literal"><span class="pre">[PageContent:*]</span></tt> section consisting of a single line, then
bring that line into the <tt class="docutils literal"><span class="pre">PageContent</span></tt> parameter of a corresponding
<tt class="docutils literal"><span class="pre">[Page:*]</span></tt> section. For example:</p>
<div class="highlight-none"><div class="highlight"><pre>[PageContent:MyPage]
#CALL:myPageContents()
</pre></div>
</div>
<p>can be replaced by:</p>
<div class="highlight-none"><div class="highlight"><pre>[Page:MyPage]
PageContent=#CALL:myPageContents()
</pre></div>
</div>
<p>If you have a <tt class="docutils literal"><span class="pre">[PageContent:*]</span></tt> section consisting of more than one line,
then add a <tt class="docutils literal"><span class="pre">[Page:*]</span></tt> section (or update an existing one) with a
<tt class="docutils literal"><span class="pre">PageContent</span></tt> parameter that uses the <a class="reference internal" href="skool-macros.html#include"><em>#INCLUDE</em></a> macro. For example:</p>
<div class="highlight-none"><div class="highlight"><pre>[PageContent:MyOtherPage]
Line 1.
Line 2.
</pre></div>
</div>
<p>can be activated by adding a corresponding <tt class="docutils literal"><span class="pre">[Page:*]</span></tt> section:</p>
<div class="highlight-none"><div class="highlight"><pre>[Page:MyOtherPage]
PageContent=#INCLUDE(PageContent:MyOtherPage)
</pre></div>
</div>
</div>
<div class="section" id="created">
<h2>Created<a class="headerlink" href="#created" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, wherever <tt class="docutils literal"><span class="pre">$VERSION</span></tt> appeared in the <tt class="docutils literal"><span class="pre">Created</span></tt> parameter in
the <a class="reference internal" href="ref-files.html#ref-game"><em>[Game]</em></a> section, it was replaced by the version number of SkoolKit.
In SkoolKit 6, this replacement is no longer made; use the <a class="reference internal" href="skool-macros.html#version"><em>#VERSION</em></a> macro
instead.</p>
</div>
<div class="section" id="defaultanimationformat">
<h2>DefaultAnimationFormat<a class="headerlink" href="#defaultanimationformat" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, the <tt class="docutils literal"><span class="pre">DefaultAnimationFormat</span></tt> parameter in the
<a class="reference internal" href="ref-files.html#ref-imagewriter"><em>[ImageWriter]</em></a> section defaulted to the value of the <tt class="docutils literal"><span class="pre">DefaultFormat</span></tt>
parameter (<tt class="docutils literal"><span class="pre">png</span></tt> by default). In SkoolKit 6, <tt class="docutils literal"><span class="pre">DefaultAnimationFormat</span></tt>
defaults to <tt class="docutils literal"><span class="pre">gif</span></tt>.</p>
</div>
<div class="section" id="udgfilename">
<h2>UDGFilename<a class="headerlink" href="#udgfilename" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, the <tt class="docutils literal"><span class="pre">UDGFilename</span></tt> parameter lived in the <a class="reference internal" href="ref-files.html#ref-game"><em>[Game]</em></a>
section. In SkoolKit 6, it has moved to the <a class="reference internal" href="ref-files.html#paths"><em>[Paths]</em></a> section.</p>
</div>
<div class="section" id="changelog-templates">
<h2>changelog_* templates<a class="headerlink" href="#changelog-templates" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">changelog_entry</span></tt> and <tt class="docutils literal"><span class="pre">changelog_item_list</span></tt> templates have been renamed
<a class="reference internal" href="html-templates.html#t-list-entry"><em>list_entry</em></a> and <a class="reference internal" href="html-templates.html#t-list-items"><em>list_items</em></a>. (They are general purpose
templates used not just by the &#8216;Changelog&#8217; page, but by any
<a class="reference internal" href="ref-files.html#boxpages"><em>box page</em></a> whose <tt class="docutils literal"><span class="pre">SectionType</span></tt> is <tt class="docutils literal"><span class="pre">BulletPoints</span></tt> or
<tt class="docutils literal"><span class="pre">ListItems</span></tt>.) Accordingly, the <tt class="docutils literal"><span class="pre">t_changelog_item_list</span></tt> and
<tt class="docutils literal"><span class="pre">m_changelog_item</span></tt> identifiers in those templates have been renamed
<tt class="docutils literal"><span class="pre">t_list_items</span></tt> and <tt class="docutils literal"><span class="pre">m_list_item</span></tt>.</p>
</div>
<div class="section" id="css-selectors">
<h2>CSS selectors<a class="headerlink" href="#css-selectors" title="Permalink to this headline">¶</a></h2>
<p>The <cite>class</cite> attributes of some HTML elements have changed in SkoolKit 6.</p>
<p>The following table lists the selectors that appeared in the CSS files in
SkoolKit 5, and their replacements in SkoolKit 6.</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SkoolKit 5</th>
<th class="head">SkoolKit 6</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>div.changelog</td>
<td>div.list-entry</td>
</tr>
<tr class="row-odd"><td>div.changelog-1</td>
<td>div.list-entry-1</td>
</tr>
<tr class="row-even"><td>div.changelog-2</td>
<td>div.list-entry-2</td>
</tr>
<tr class="row-odd"><td>div.changelog-desc</td>
<td>div.list-entry-desc</td>
</tr>
<tr class="row-even"><td>div.changelog-title</td>
<td>div.list-entry-title</td>
</tr>
<tr class="row-odd"><td>ul.changelog</td>
<td>ul.list-entry</td>
</tr>
</tbody>
</table>
<p>In addition, the &#8216;ul.changelogN&#8217; selector (N=1, 2, 3 etc.), which is used in
the stock <a class="reference internal" href="html-templates.html#t-list-items"><em>list_items</em></a> template but is unstyled (i.e. does not appear in
any of the CSS files), has been replaced by &#8216;ul.list-entryN&#8217; in SkoolKit 6.</p>
</div>
<div class="section" id="pageheaders-asm-t">
<h2>PageHeaders:Asm-t<a class="headerlink" href="#pageheaders-asm-t" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, the default <a class="reference internal" href="ref-files.html#pageheaders"><em>header</em></a> for <tt class="docutils literal"><span class="pre">Asm-t</span></tt> pages
(disassembly pages for &#8216;t&#8217; blocks) was &#8216;Data&#8217;. In SkoolKit 6, it is &#8216;Messages&#8217;.</p>
</div>
<div class="section" id="titles-asm-t">
<h2>Titles:Asm-t<a class="headerlink" href="#titles-asm-t" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, the default <a class="reference internal" href="ref-files.html#titles"><em>title</em></a> for <tt class="docutils literal"><span class="pre">Asm-t</span></tt> pages
(disassembly pages for &#8216;t&#8217; blocks) was &#8216;Data at&#8217;. In SkoolKit 6, it is &#8216;Text
at&#8217;.</p>
</div>
<div class="section" id="bin2tap-py-t">
<h2>bin2tap.py -t<a class="headerlink" href="#bin2tap-py-t" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, <a class="reference internal" href="commands.html#bin2tap-py"><em>bin2tap.py</em></a> had a <tt class="docutils literal"><span class="pre">-t/--tapfile</span></tt> option for specifying
the output TAP filename. In SkoolKit 6, this option is not supported; instead
the TAP filename should be specified, if necessary, after the input filename.
For example:</p>
<div class="highlight-none"><div class="highlight"><pre>$ bin2tap.py in.bin out.tap
</pre></div>
</div>
</div>
<div class="section" id="skool2ctl-py-a">
<h2>skool2ctl.py -a<a class="headerlink" href="#skool2ctl-py-a" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, <a class="reference internal" href="commands.html#skool2ctl-py"><em>skool2ctl.py</em></a> had a <tt class="docutils literal"><span class="pre">-a/--no-asm-dirs</span></tt> option for
omitting ASM directives from the output. In SkoolKit 6, this option is not
supported; instead, the <tt class="docutils literal"><span class="pre">-w/--write</span></tt> option now recognises the &#8216;a&#8217; identifier
for specifying whether to include ASM directives in the output.</p>
</div>
<div class="section" id="skool2html-py-w">
<h2>skool2html.py -w<a class="headerlink" href="#skool2html-py-w" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5, the <tt class="docutils literal"><span class="pre">-w/--write</span></tt> option of <a class="reference internal" href="commands.html#skool2html-py"><em>skool2html.py</em></a> recognised the
&#8216;B&#8217; (Graphic glitches), &#8216;b&#8217; (Bugs), &#8216;c&#8217; (Changelog), &#8216;p&#8217; (Pokes), &#8216;t&#8217; (Trivia)
and &#8216;y&#8217; (Glossary) file identifiers. In SkoolKit 6, these file identifiers are
not supported; instead, the &#8216;P&#8217; file identifier should be used along with the
<tt class="docutils literal"><span class="pre">-P/--pages</span></tt> option.</p>
<p>For example, to write only the &#8216;Bugs&#8217; and &#8216;Changelog&#8217; pages:</p>
<div class="highlight-none"><div class="highlight"><pre>$ skool2html.py --write P --pages Bugs,Changelog game.ref
</pre></div>
</div>
</div>
<div class="section" id="udg">
<h2>Udg<a class="headerlink" href="#udg" title="Permalink to this headline">¶</a></h2>
<p>In SkoolKit 5.4, the <a class="reference internal" href="extending.html#skoolkit.graphics.Udg" title="skoolkit.graphics.Udg"><tt class="xref py py-class docutils literal"><span class="pre">Udg</span></tt></a> class moved from
skoolkit.skoolhtml to skoolkit.graphics, but was still available in
skoolkit.skoolhtml. In SkoolKit 6, it is no longer available in
skoolkit.skoolhtml.</p>
</div>
<div class="section" id="flip-udgs">
<h2>flip_udgs()<a class="headerlink" href="#flip-udgs" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">flip_udgs()</span></tt> method on HtmlWriter has been removed in SkoolKit 6. Use
the <a class="reference internal" href="extending.html#skoolkit.graphics.flip_udgs" title="skoolkit.graphics.flip_udgs"><tt class="xref py py-func docutils literal"><span class="pre">flip_udgs()</span></tt></a> function in skoolkit.graphics instead.</p>
</div>
<div class="section" id="rotate-udgs">
<h2>rotate_udgs()<a class="headerlink" href="#rotate-udgs" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">rotate_udgs()</span></tt> method on HtmlWriter has been removed in SkoolKit 6.
Use the <a class="reference internal" href="extending.html#skoolkit.graphics.rotate_udgs" title="skoolkit.graphics.rotate_udgs"><tt class="xref py py-func docutils literal"><span class="pre">rotate_udgs()</span></tt></a> function in skoolkit.graphics
instead.</p>
</div>
<div class="section" id="parse-image-params">
<h2>parse_image_params()<a class="headerlink" href="#parse-image-params" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">parse_image_params()</span></tt> method on HtmlWriter has been removed in
SkoolKit 6. Use the <a class="reference internal" href="extending.html#skoolkit.skoolmacro.parse_image_macro" title="skoolkit.skoolmacro.parse_image_macro"><tt class="xref py py-func docutils literal"><span class="pre">parse_image_macro()</span></tt></a> function
instead.</p>
</div>
<div class="section" id="parse-params">
<h2>parse_params()<a class="headerlink" href="#parse-params" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="xref py py-func docutils literal"><span class="pre">parse_params()</span></tt> function in skoolkit.skoolmacro has been removed in
SkoolKit 6. Use the <a class="reference internal" href="extending.html#skoolkit.skoolmacro.parse_ints" title="skoolkit.skoolmacro.parse_ints"><tt class="xref py py-func docutils literal"><span class="pre">parse_ints()</span></tt></a> and
<a class="reference internal" href="extending.html#skoolkit.skoolmacro.parse_brackets" title="skoolkit.skoolmacro.parse_brackets"><tt class="xref py py-func docutils literal"><span class="pre">parse_brackets()</span></tt></a> functions instead.</p>
</div>
<div class="section" id="skoolkit5to6-py">
<h2>skoolkit5to6.py<a class="headerlink" href="#skoolkit5to6-py" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/skoolkid/skoolkit/raw/master/utils/skoolkit5to6.py">skoolkit5to6.py</a> script may be used to convert a ref file or CSS file
that is compatible with SkoolKit 5 into a file that will work with SkoolKit 6.
For example, to convert <cite>game.ref</cite>:</p>
<div class="highlight-none"><div class="highlight"><pre>$ skoolkit5to6.py game.ref &gt; game6.ref
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="assemblers.html" title="Supported assemblers"
             >previous</a> |</li>
        <li><a href="index.html">SkoolKit 6.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2017, Richard Dymond.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>