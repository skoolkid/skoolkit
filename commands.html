
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Commands &#8212; SkoolKit 9.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supported assemblers" href="assemblers.html" />
    <link rel="prev" title="Disassembly DIY" href="diy.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="assemblers.html" title="Supported assemblers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="diy.html" title="Disassembly DIY"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.6 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Commands</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="commands">
<span id="id1"></span><h1>Commands<a class="headerlink" href="#commands" title="Permalink to this heading">¶</a></h1>
<section id="bin2sna-py">
<span id="id2"></span><h2>bin2sna.py<a class="headerlink" href="#bin2sna-py" title="Permalink to this heading">¶</a></h2>
<p><cite>bin2sna.py</cite> converts a binary (raw memory) file into an SZX or Z80 snapshot.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ bin2sna.py game.bin
</pre></div>
</div>
<p>will create a file named <cite>game.z80</cite>.</p>
<p>If the input file is 128K in length, it is assumed to hold the contents of RAM
banks 0-7 in order, and <cite>bin2sna.py</cite> will write a corresponding 128K snapshot.
Otherwise, the <code class="docutils literal notranslate"><span class="pre">--page</span></code> option is required to write a 128K snapshot, and the
contents of individual RAM banks may be specified by <code class="docutils literal notranslate"><span class="pre">--bank</span></code> options. If the
input file is less than 128K in length and no <code class="docutils literal notranslate"><span class="pre">--page</span></code> option is given, a 48K
snapshot is written.</p>
<p>Run <cite>bin2sna.py</cite> with no arguments to see the list of available options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: bin2sna.py [options] file.bin [OUTFILE]

Convert a binary (raw memory) file into an SZX or Z80 snapshot. &#39;file.bin&#39; may
be a regular file, or &#39;-&#39; for standard input. If &#39;OUTFILE&#39; is not given, it
defaults to the name of the input file with &#39;.bin&#39; replaced by &#39;.z80&#39;, or
&#39;program.z80&#39; if reading from standard input.

Options:
  --bank N,file         Load RAM bank N (0-7) from the named file. This option
                        may be used multiple times.
  -b BORDER, --border BORDER
                        Set the border colour (default: 7).
  -o ORG, --org ORG     Set the origin address (default: 65536 minus the
                        length of file.bin).
  --page N              Specify the RAM bank (N=0-7) mapped to 49152 (0xC000)
                        in the main input file. This option creates a 128K
                        snapshot.
  -p STACK, --stack STACK
                        Set the stack pointer (default: ORG).
  -P [p:]a[-b[-c]],[^+]v, --poke [p:]a[-b[-c]],[^+]v
                        POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}.
                        Prefix &#39;v&#39; with &#39;^&#39; to perform an XOR operation, or
                        &#39;+&#39; to perform an ADD operation. This option may be
                        used multiple times.
  -r name=value, --reg name=value
                        Set the value of a register. Do &#39;--reg help&#39; for more
                        information. This option may be used multiple times.
  -s START, --start START
                        Set the address at which to start execution (default:
                        ORG).
  -S name=value, --state name=value
                        Set a hardware state attribute. Do &#39;--state help&#39; for
                        more information. This option may be used multiple
                        times.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--bank</span></code> and <code class="docutils literal notranslate"><span class="pre">--page</span></code> options and support for
writing 128K snapshots; the <code class="docutils literal notranslate"><span class="pre">--poke</span></code> option can modify specific
RAM banks</p></td>
</tr>
<tr class="row-odd"><td><p>9.0</p></td>
<td><p>Added support for writing SZX snapshots; added the <code class="docutils literal notranslate"><span class="pre">fe</span></code>
hardware state attribute</p></td>
</tr>
<tr class="row-even"><td><p>8.10</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">issue2</span></code> hardware state attribute</p></td>
</tr>
<tr class="row-odd"><td><p>8.9</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">tstates</span></code> hardware state attribute</p></td>
</tr>
<tr class="row-even"><td><p>6.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--poke</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--reg</span></code> and <code class="docutils literal notranslate"><span class="pre">--state</span></code> options; the <code class="docutils literal notranslate"><span class="pre">--org</span></code>,
<code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal integer
prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>5.2</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bin2tap-py">
<span id="id3"></span><h2>bin2tap.py<a class="headerlink" href="#bin2tap-py" title="Permalink to this heading">¶</a></h2>
<p><cite>bin2tap.py</cite> converts a binary (raw memory) file or a SNA, SZX or Z80 snapshot
into a PZX or TAP file. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ bin2tap.py game.bin
</pre></div>
</div>
<p>will create a file called <cite>game.tap</cite>. By default, the origin address (the
address of the first byte of code or data), the start address (the first byte
of code to run) and the stack pointer are set to 65536 minus the length of
<cite>game.bin</cite>. These values can be changed by passing options to <cite>bin2tap.py</cite>. Run
it with no arguments to see the list of available options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: bin2tap.py [options] FILE [OUTFILE]

Convert a binary (raw memory) file or a SNA, SZX or Z80 snapshot into a PZX or
TAP file. FILE may be a regular file, or &#39;-&#39; to read a binary file from
standard input. If OUTFILE is not given, a TAP file is created.

Options:
  --7ffd N              Add 128K RAM banks to the tape file and write N to
                        port 0x7ffd after they&#39;ve loaded.
  --banks N[,N...]      Add only these 128K RAM banks to the tape file
                        (default: 0,1,3,4,6,7).
  -b BEGIN, --begin BEGIN
                        Begin conversion at this address (default: ORG for a
                        binary file, 16384 for a snapshot).
  -c N, --clear N       Use a &#39;CLEAR N&#39; command in the BASIC loader and leave
                        the stack pointer alone.
  -e END, --end END     End conversion at this address.
  --loader ADDR         Place the 128K RAM bank loader at this address
                        (default: CLEAR address + 1).
  -o ORG, --org ORG     Set the origin address for a binary file (default:
                        65536 minus the length of FILE).
  -p STACK, --stack STACK
                        Set the stack pointer (default: BEGIN).
  -s START, --start START
                        Set the start address to JP to (default: BEGIN).
  -S FILE, --screen FILE
                        Add a loading screen to the tape file. FILE may be a
                        snapshot or a 6912-byte SCR file.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>Note that the ROM tape loading routine at 1366 (0x0556) and the load routine
used by <cite>bin2tap.py</cite> together require 14 bytes for stack operations, and so
STACK must be at least 16384+14=16398 (0x400E). This means that if ORG is less
than 16398, you should use the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option to set the stack pointer to
something appropriate. If the main data block (derived from <cite>game.bin</cite>)
overlaps any of the last four bytes of the stack, <cite>bin2tap.py</cite> will replace
those bytes with the values required by the tape loading routine for correct
operation upon returning. Stack operations will overwrite the bytes in the
address range STACK-14 to STACK-1 inclusive, so those addresses should not be
used to store essential code or data.</p>
<p>If the input file contains a program that returns to BASIC, you should use the
<code class="docutils literal notranslate"><span class="pre">--clear</span></code> option to add a CLEAR command to the BASIC loader. This option
leaves the stack pointer alone, enabling the program to return to BASIC without
crashing. The lowest usable address with the <code class="docutils literal notranslate"><span class="pre">--clear</span></code> option on a bare 48K
Spectrum is 23972 (0x5DA4) if a loading screen is used, or 23952 (0x5D90)
otherwise.</p>
<p>To create a tape file that loads a 128K game, use the <code class="docutils literal notranslate"><span class="pre">--7ffd</span></code>, <code class="docutils literal notranslate"><span class="pre">--begin</span></code>
and <code class="docutils literal notranslate"><span class="pre">--clear</span></code> options along with a 128K snapshot or a 128K binary file as
input, where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--7ffd</span></code> specifies the value to write to port 0x7FFD after all the RAM
banks have loaded and before starting the game</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--begin</span></code> specifies the start address of the code/data below 49152 (0xC000)
to include on the tape</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--clear</span></code> specifies the address of the CLEAR command in the BASIC loader</p></li>
</ul>
<p>By default, the 128K RAM bank loader (which is 39-45 bytes long, depending on
the number of RAM banks to load) is placed one above the CLEAR address. Use the
<code class="docutils literal notranslate"><span class="pre">--loader</span></code> option to place it at an alternative address. The lowest usable
address with the <code class="docutils literal notranslate"><span class="pre">--clear</span></code> option on a bare 128K Spectrum is 23977 (0x5DA9)
if a loading screen is used, or 23957 (0x5D95) otherwise.</p>
<p>By default, 128K RAM banks 0, 1, 3, 4, 6 and 7 are added to the tape file. If
one or more of these RAM banks are not required, use the <code class="docutils literal notranslate"><span class="pre">--banks</span></code> option to
specify a smaller set of RAM banks to add. If none of these RAM banks are
required, use <code class="docutils literal notranslate"><span class="pre">,</span></code> (a single comma) as the argument to the <code class="docutils literal notranslate"><span class="pre">--banks</span></code> option.
The contents of RAM banks 5 and 2 - from the <code class="docutils literal notranslate"><span class="pre">--begin</span></code> address and up to but
not including the <code class="docutils literal notranslate"><span class="pre">--end</span></code> address (if given) - are included in the main code
block on the tape.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.3</p></td>
<td><p>Added support for writing PZX files</p></td>
</tr>
<tr class="row-odd"><td><p>9.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--7ffd</span></code>, <code class="docutils literal notranslate"><span class="pre">--banks</span></code> and <code class="docutils literal notranslate"><span class="pre">--loader</span></code> options and
support for writing 128K TAP files</p></td>
</tr>
<tr class="row-even"><td><p>8.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--begin</span></code> option; the <code class="docutils literal notranslate"><span class="pre">--end</span></code> option applies to raw
memory files as well as snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--clear</span></code>, <code class="docutils literal notranslate"><span class="pre">--end</span></code>, <code class="docutils literal notranslate"><span class="pre">--org</span></code>, <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and
<code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>5.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--screen</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.2</p></td>
<td><p>Added the ability to read a binary file from standard input;
added a second positional argument specifying the TAP filename</p></td>
</tr>
<tr class="row-even"><td><p>4.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--clear</span></code> and <code class="docutils literal notranslate"><span class="pre">--end</span></code> options, and the ability to
convert SNA, SZX and Z80 snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option and the long options</p></td>
</tr>
<tr class="row-even"><td><p>2.2.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>1.3.1</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rzxinfo-py">
<span id="id4"></span><h2>rzxinfo.py<a class="headerlink" href="#rzxinfo-py" title="Permalink to this heading">¶</a></h2>
<p><cite>rzxinfo.py</cite> shows the blocks in or extracts the snapshots from an RZX file.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ rzxinfo.py game.rzx
</pre></div>
</div>
<p>To list the options supported by <cite>rzxinfo.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: rzxinfo.py [options] FILE

Show the blocks in or extract the snapshots from an RZX file.

Options:
  --extract      Extract snapshots.
  --frames       Show the contents of every frame.
  -V, --version  Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.2</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rzxplay-py">
<span id="id5"></span><h2>rzxplay.py<a class="headerlink" href="#rzxplay-py" title="Permalink to this heading">¶</a></h2>
<p><cite>rzxplay.py</cite> plays an RZX file. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ rzxplay.py game.rzx
</pre></div>
</div>
<p>To list the options supported by <cite>rzxplay.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: rzxplay.py [options] FILE [OUTFILE]

Play an RZX file. If &#39;OUTFILE&#39; is given, an SZX or Z80 snapshot or an RZX file
is written after playback has completed.

Options:
  --flags FLAGS    Set playback flags. Do &#39;--flags help&#39; for more information.
  --force          Force playback when unsupported hardware is detected.
  --fps FPS        Run at this many frames per second (default: 50). 0 means
                   maximum speed.
  --map FILE       Log addresses of executed instructions to a file.
  --no-screen      Run without a screen.
  --python         Use the pure Python Z80 simulator.
  --quiet          Don&#39;t print progress percentage.
  --scale SCALE    Scale display up by this factor (1-4; default: 2).
  --snapshot FILE  Specify an external snapshot file to start with.
  --stop FRAMES    Stop after playing this many frames.
  --trace FILE     Log executed instructions to a file.
  -V, --version    Show SkoolKit version number and exit.
</pre></div>
</div>
<p><cite>rzxplay.py</cite> can play RZX files that were recorded in 48K, 128K or +2 mode with
no peripherals (e.g. Interface 1) attached. The <code class="docutils literal notranslate"><span class="pre">--force</span></code> option can be used
to make <cite>rzxplay.py</cite> attempt playback of files that were recorded on
unsupported machines or with unsupported hardware attached, but they are
unlikely to play to the end.</p>
<p>If <a class="reference external" href="https://pygame.org/">pygame</a> is installed, <cite>rzxplay.py</cite> will use it to render the Spectrum’s
screen contents at 50 frames per second by default. Use the <code class="docutils literal notranslate"><span class="pre">--fps</span></code> option
to change the frame rate. Specifying <code class="docutils literal notranslate"><span class="pre">--fps</span> <span class="pre">0</span></code> makes <cite>rzxplay.py</cite> run at
maximum speed. To disable the screen and make <cite>rzxplay.py</cite> run even faster, use
the <code class="docutils literal notranslate"><span class="pre">--no-screen</span></code> option.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--map</span></code> option can be used to log the addresses of instructions executed
during playback to a file. This file can then be used by <a class="reference internal" href="#sna2ctl-py"><span class="std std-ref">sna2ctl.py</span></a> to
produce a control file. If the file specified by the <code class="docutils literal notranslate"><span class="pre">--map</span></code> option already
exists, any addresses it contains will be merged with those of the instructions
executed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--flags</span></code> option sets flags that control the playback of RZX frames when
interrupts are enabled. If an RZX file fails to play to completion, setting one
or more of these flags may help. <code class="docutils literal notranslate"><span class="pre">FLAGS</span></code> is the sum of the following values,
chosen according to the desired outcome:</p>
<ul class="simple">
<li><p>1 - When the last instruction in a frame is either ‘LD A,I’ or ‘LD A,R’,
reset bit 2 of the flags register. This is the expected behaviour of a real
Z80, but some RZX files fail when this flag is set.</p></li>
<li><p>2 - When the last instruction in a frame is ‘EI’, and the next frame is a
short one (i.e. has a fetch count of 1 or 2), block the interrupt in the next
frame. By default, and according to RZX convention, <cite>rzxplay.py</cite> accepts an
interrupt at the start of every frame except the first, regardless of whether
the instruction just executed would normally block it. However, some RZX
files contain a short frame immediately after an ‘EI’ to indicate that the
interrupt should in fact be blocked, and therefore require this flag to be
set to play back correctly.</p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">OUTFILE</span></code> is given, and ends with either ‘.z80’ or ‘.szx’, then a snapshot
in the corresponding format is written when playback ends. Similarly, if
<code class="docutils literal notranslate"><span class="pre">OUTFILE</span></code> ends with ‘.rzx’, then an RZX file is written when playback ends.
However, this makes sense only if <code class="docutils literal notranslate"><span class="pre">--stop</span></code> is used to end playback somewhere
in the middle of the input RZX file, otherwise the output RZX file will be
empty (i.e. contain no frames).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.2</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="skool2asm-py">
<span id="id6"></span><h2>skool2asm.py<a class="headerlink" href="#skool2asm-py" title="Permalink to this heading">¶</a></h2>
<p><cite>skool2asm.py</cite> converts a skool file into an ASM file that can be fed to an
assembler (see <a class="reference internal" href="assemblers.html#supportedassemblers"><span class="std std-ref">Supported assemblers</span></a>). For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2asm.py game.skool &gt; game.asm
</pre></div>
</div>
<p><cite>skool2asm.py</cite> supports many options; run it with no arguments to see a list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2asm.py [options] FILE

Convert a skool file into an ASM file and write it to standard output. FILE may
be a regular file, or &#39;-&#39; for standard input.

Options:
  -c, --create-labels   Create default labels for unlabelled instructions.
  -D, --decimal         Write the disassembly in decimal.
  -E ADDR, --end ADDR   Stop converting at this address.
  -f N, --fixes N       Apply fixes:
                          N=0: None (default)
                          N=1: @ofix only
                          N=2: @ofix and @bfix
                          N=3: @ofix, @bfix and @rfix (implies -r)
  -F, --force           Force conversion, ignoring @start and @end directives.
  -H, --hex             Write the disassembly in hexadecimal.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -l, --lower           Write the disassembly in lower case.
  -p, --package-dir     Show path to skoolkit package directory and exit.
  -P p=v, --set p=v     Set the value of ASM writer property &#39;p&#39; to &#39;v&#39;. This
                        option may be used multiple times.
  -q, --quiet           Be quiet.
  -r, --rsub            Apply safe substitutions (@ssub) and relocatability
                        substitutions (@rsub) (implies &#39;-f 1&#39;).
  --show-config         Show configuration parameter values.
  -s, --ssub            Apply safe substitutions (@ssub).
  -S ADDR, --start ADDR
                        Start converting at this address.
  -u, --upper           Write the disassembly in upper case.
  --var name=value      Define a variable that can be used by @if and the SMPL
                        macros. This option may be used multiple times.
  -V, --version         Show SkoolKit version number and exit.
  -w, --no-warnings     Suppress warnings.
  -W CLASS, --writer CLASS
                        Specify the ASM writer class to use.
</pre></div>
</div>
<p>See <a class="reference internal" href="asm.html#asmmodesanddirectives"><span class="std std-ref">ASM modes and directives</span></a> for a description of the <code class="docutils literal notranslate"><span class="pre">&#64;ssub</span></code> and
<code class="docutils literal notranslate"><span class="pre">&#64;rsub</span></code> substitution modes, and the <code class="docutils literal notranslate"><span class="pre">&#64;ofix</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;bfix</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;rfix</span></code> bugfix
modes.</p>
<p>See the <a class="reference internal" href="asm.html#set"><span class="std std-ref">&#64;set</span></a> directive for information on the ASM writer properties that
can be set by the <code class="docutils literal notranslate"><span class="pre">--set</span></code> option.</p>
<section id="configuration">
<span id="skool2asm-conf"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h3>
<p><cite>skool2asm.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Address</span></code> - the format of the default link text for the <a class="reference internal" href="skool-macros.html#r"><span class="std std-ref">#R</span></a> macro when
the target address has no label (default: ‘’); this format string recognises
the replacement field <code class="docutils literal notranslate"><span class="pre">address</span></code>; if the format string is blank, the address
is formatted exactly as it appears in the skool file (without any <code class="docutils literal notranslate"><span class="pre">$</span></code>
prefix)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - convert addresses and instruction operands to hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>), or leave them as they are (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>),
or leave it as it is (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CreateLabels</span></code> - create default labels for unlabelled instructions (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> - the format of the default label for the first instruction in
a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">L{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> - the format of the default label for an instruction
other than the first in a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">{main}_{index}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Quiet</span></code> - be quiet (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or verbose (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Set-property</span></code> - set an ASM writer property value, e.g. <code class="docutils literal notranslate"><span class="pre">Set-bullet=+</span></code>
(see the <a class="reference internal" href="asm.html#set"><span class="std std-ref">&#64;set</span></a> directive for a list of available properties)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Templates</span></code> - file from which to read custom <a class="reference internal" href="asm-templates.html#asmtemplates"><span class="std std-ref">ASM templates</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Warnings</span></code> - show warnings (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or suppress them (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> are standard Python format strings.
<code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the routine or data block as it appears in the
skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the routine or data block as an integer</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the instruction as it appears in the skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - 0 for the first unlabelled instruction in the routine or data
block, 1 for the second, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the instruction as an integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> - the label of the first instruction in the routine or data block</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2asm]</span></code> section. For example,
to make <cite>skool2asm.py</cite> write the disassembly in hexadecimal with a line width
of 120 characters by default (without having to use the <code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-P</span></code>
options on the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2asm]
Base=16
Set-line-width=120
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Address</span></code>, <code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code>
configuration parameters</p></td>
</tr>
<tr class="row-odd"><td><p>7.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Templates</span></code> configuration parameter and support for
<a class="reference internal" href="asm-templates.html#asmtemplates"><span class="std std-ref">ASM templates</span></a></p></td>
</tr>
<tr class="row-even"><td><p>7.0</p></td>
<td><p><a class="reference internal" href="skool-files.html#nonentryblocks"><span class="std std-ref">Non-entry blocks</span></a> are reproduced verbatim; added the
<code class="docutils literal notranslate"><span class="pre">--force</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--var</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> option; the <code class="docutils literal notranslate"><span class="pre">--end</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code>
options accept a hexadecimal integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>5.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--set</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>4.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--start</span></code> and <code class="docutils literal notranslate"><span class="pre">--end</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>4.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--writer</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> and <code class="docutils literal notranslate"><span class="pre">-p</span></code> options and the long options</p></td>
</tr>
<tr class="row-even"><td><p>2.2.2</p></td>
<td><p>Added the ability to read a skool file from standard input</p></td>
</tr>
<tr class="row-odd"><td><p>2.1.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-u</span></code>, <code class="docutils literal notranslate"><span class="pre">-D</span></code> and <code class="docutils literal notranslate"><span class="pre">-H</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>1.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="skool2bin-py">
<span id="id7"></span><h2>skool2bin.py<a class="headerlink" href="#skool2bin-py" title="Permalink to this heading">¶</a></h2>
<p><cite>skool2bin.py</cite> converts a skool file into a binary (raw memory) file. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2bin.py game.skool
</pre></div>
</div>
<p>To list the options supported by <cite>skool2bin.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2bin.py [options] file.skool [file.bin]

Convert a skool file into a binary (raw memory) file. &#39;file.skool&#39; may be a
regular file, or &#39;-&#39; for standard input. If &#39;file.bin&#39; is not given, it
defaults to the name of the input file with &#39;.skool&#39; replaced by &#39;.bin&#39;.
&#39;file.bin&#39; may be a regular file, or &#39;-&#39; for standard output.

Options:
  -B, --banks           Process @bank directives and write RAM banks 0-7 to a
                        128K file.
  -b, --bfix            Apply @ofix and @bfix directives.
  -d, --data            Process @defb, @defs and @defw directives.
  -E ADDR, --end ADDR   Stop converting at this address.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -i, --isub            Apply @isub directives.
  -o, --ofix            Apply @ofix directives.
  -r, --rsub            Apply @isub, @ssub and @rsub directives (implies
                        --ofix).
  -R, --rfix            Apply @ofix, @bfix and @rfix directives (implies
                        --rsub).
  --show-config         Show configuration parameter values.
  -s, --ssub            Apply @isub and @ssub directives.
  -S ADDR, --start ADDR
                        Start converting at this address.
  -v, --verbose         Show info on each converted instruction.
  -V, --version         Show SkoolKit version number and exit.
  -w, --no-warnings     Suppress warnings.
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option shows information on each converted instruction, such
as whether it was inserted before or after another instruction (by a <code class="docutils literal notranslate"><span class="pre">&#64;*sub</span></code>
or <code class="docutils literal notranslate"><span class="pre">&#64;*fix</span></code> directive), and its original address (if it was relocated by the
insertion, removal or replacement of other instructions). For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>40000 9C40 &gt; XOR A
40001 9C41 | LD HL,40006   : 40000 9C40 LD HL,40003
40004 9C44 + JR 40006      :            JR 40003
40006 9C46   RET           : 40003 9C43 RET
</pre></div>
</div>
<p>This output shows that:</p>
<ul class="simple">
<li><p>The instruction at 40000 (XOR A) was inserted before (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>) another
instruction</p></li>
<li><p>The instruction at 40001 (LD HL,40006) overwrote (<code class="docutils literal notranslate"><span class="pre">|</span></code>) the instruction(s)
originally at 40000, and had its operand changed from 40003 (because the
instruction originally at that address was relocated to 40006)</p></li>
<li><p>The instruction at 40004 (JR 40006) was inserted after (<code class="docutils literal notranslate"><span class="pre">+</span></code>) another
instruction, and also had its operand changed from 40003</p></li>
<li><p>The instruction at 40006 (RET) was originally at 40003 (before other
instructions were inserted, removed or replaced)</p></li>
</ul>
<section id="skool2bin-conf">
<span id="id8"></span><h3>Configuration<a class="headerlink" href="#skool2bin-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>skool2bin.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Banks</span></code> - process <a class="reference internal" href="asm.html#asm-bank"><span class="std std-ref">&#64;bank</span></a> directives and write RAM banks 0-7 to a
128K file (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Data</span></code> - process <a class="reference internal" href="asm.html#defb"><span class="std std-ref">&#64;defb</span></a>, <a class="reference internal" href="asm.html#defs"><span class="std std-ref">&#64;defs</span></a> and <a class="reference internal" href="asm.html#defw"><span class="std std-ref">&#64;defw</span></a> directives
(<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PadLeft</span></code> - address at which to start padding the output on the left with
zeroes; the default value is <code class="docutils literal notranslate"><span class="pre">65536</span></code>, which produces no padding</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PadRight</span></code> - address at which to stop padding the output on the right with
zeroes; the default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>, which produces no padding</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Verbose</span></code> - show info on each converted instruction (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t
(<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Warnings</span></code> - show warnings (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or suppress them (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2bin]</span></code> section. For example,
to make <cite>skool2bin.py</cite> suppress warnings (without having to use the <code class="docutils literal notranslate"><span class="pre">-w</span></code>
option on the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2bin]
Warnings=0
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.4</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options; added support for
padding the output with zeroes</p></td>
</tr>
<tr class="row-odd"><td><p>9.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--banks</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>8.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--data</span></code>, <code class="docutils literal notranslate"><span class="pre">--rsub</span></code>, <code class="docutils literal notranslate"><span class="pre">--rfix</span></code>, <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> and
<code class="docutils literal notranslate"><span class="pre">--no-warnings</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>7.0</p></td>
<td><p><a class="reference internal" href="asm.html#asm-if"><span class="std std-ref">&#64;if</span></a> directives are processed</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--end</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal
integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Added the ability to assemble instructions whose operands contain
arithmetic expressions</p></td>
</tr>
<tr class="row-even"><td><p>5.2</p></td>
<td><p>Added the ability to write the binary file to standard output</p></td>
</tr>
<tr class="row-odd"><td><p>5.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--bfix</span></code>, <code class="docutils literal notranslate"><span class="pre">--ofix</span></code> and <code class="docutils literal notranslate"><span class="pre">--ssub</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>5.0</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="skool2ctl-py">
<span id="id9"></span><h2>skool2ctl.py<a class="headerlink" href="#skool2ctl-py" title="Permalink to this heading">¶</a></h2>
<p><cite>skool2ctl.py</cite> converts a skool file into a <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control file</span></a>.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2ctl.py game.skool &gt; game.ctl
</pre></div>
</div>
<p>In addition to block types and addresses, <cite>game.ctl</cite> will contain block titles,
block descriptions, registers, mid-block comments, block start and end
comments, sub-block types and addresses, instruction-level comments, non-entry
blocks, and some <a class="reference internal" href="asm.html#asmdirectives"><span class="std std-ref">ASM directives</span></a>.</p>
<p>To list the options supported by <cite>skool2ctl.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2ctl.py [options] FILE

Convert a skool file into a control file and write it to standard output. FILE
may be a regular file, or &#39;-&#39; for standard input.

Options:
  -b, --preserve-base   Preserve the base of decimal and hexadecimal values in
                        instruction operands and DEFB/DEFM/DEFS/DEFW statements.
  -E ADDR, --end ADDR   Stop converting at this address.
  -h, --hex             Write addresses in upper case hexadecimal format.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -k, --keep-lines      Preserve line breaks in comments.
  -l, --hex-lower       Write addresses in lower case hexadecimal format.
  --show-config         Show configuration parameter values.
  -S ADDR, --start ADDR
                        Start converting at this address.
  -V, --version         Show SkoolKit version number and exit.
  -w X, --write X       Write only these elements, where X is one or more of:
                          a = ASM directives
                          b = block types and addresses
                          t = block titles
                          d = block descriptions
                          r = registers
                          m = mid-block comments and block start/end comments
                          s = sub-block types and addresses
                          c = instruction-level comments
                          n = non-entry blocks
</pre></div>
</div>
<section id="skool2ctl-conf">
<span id="id10"></span><h3>Configuration<a class="headerlink" href="#skool2ctl-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>skool2ctl.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Hex</span></code> - write addresses in decimal (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default), lower case
hexadecimal (<code class="docutils literal notranslate"><span class="pre">1</span></code>),  or upper case hexadecimal (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KeepLines</span></code> - preserve line breaks in comments (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PreserveBase</span></code> - preserve the base of decimal and hexadecimal values in
instruction operands and DEFB/DEFM/DEFS/DEFW statements (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t
(<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2ctl]</span></code> section. For
example, to make <cite>skool2ctl.py</cite> write upper case hexadecimal addresses by
default (without having to use the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option on the command line), add the
following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2ctl]
Hex=2
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7.2</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> and <code class="docutils literal notranslate"><span class="pre">--keep-lines</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>7.0</p></td>
<td><p>Added support for the ‘n’ identifier in the <code class="docutils literal notranslate"><span class="pre">--write</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--end</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal
integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.0</p></td>
<td><p>Added support for the ‘a’ identifier in the <code class="docutils literal notranslate"><span class="pre">--write</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>5.1</p></td>
<td><p>A terminal <code class="docutils literal notranslate"><span class="pre">i</span></code> directive is appended if the skool file ends
before 65536</p></td>
</tr>
<tr class="row-odd"><td><p>4.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--start</span></code> and <code class="docutils literal notranslate"><span class="pre">--end</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>4.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--hex-lower</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>3.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--preserve-base</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option and the long options</p></td>
</tr>
<tr class="row-odd"><td><p>2.4</p></td>
<td><p>Added the ability to preserve some ASM directives</p></td>
</tr>
<tr class="row-even"><td><p>2.2.2</p></td>
<td><p>Added the ability to read a skool file from standard input</p></td>
</tr>
<tr class="row-odd"><td><p>2.0.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>1.1</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="skool2html-py">
<span id="id11"></span><h2>skool2html.py<a class="headerlink" href="#skool2html-py" title="Permalink to this heading">¶</a></h2>
<p><cite>skool2html.py</cite> converts a skool file (and its associated ref files, if any
exist) into a browsable disassembly in HTML format.</p>
<p>For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2html.py game.skool
</pre></div>
</div>
<p>will convert the file <cite>game.skool</cite> into a bunch of HTML files. If any files
named <cite>game*.ref</cite> (e.g. <cite>game.ref</cite>, <cite>game-bugs.ref</cite>, <cite>game-pokes.ref</cite> and so
on) also exist in the same directory as <cite>game.skool</cite>, they will be used to
provide further information to the conversion process, along with any extra
files named in the <code class="docutils literal notranslate"><span class="pre">RefFiles</span></code> parameter in the <a class="reference internal" href="ref-files.html#ref-config"><span class="std std-ref">[Config]</span></a> section, and
any other ref files named on the command line.</p>
<p><cite>skool2html.py</cite> supports several options; run it with no arguments to see a
list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2html.py [options] SKOOLFILE [REFFILE...]

Convert a skool file and ref files to HTML. SKOOLFILE may be a regular file, or
&#39;-&#39; for standard input.

Options:
  -1, --asm-one-page    Write all routines and data blocks to a single page.
  -a, --asm-labels      Use ASM labels.
  -c S/L, --config S/L  Add the line &#39;L&#39; to the ref file section &#39;S&#39;. This
                        option may be used multiple times.
  -C, --create-labels   Create default labels for unlabelled instructions.
  -d DIR, --output-dir DIR
                        Write files in this directory (default is &#39;.&#39;).
  -D, --decimal         Write the disassembly in decimal.
  -H, --hex             Write the disassembly in hexadecimal.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -j NAME, --join-css NAME
                        Concatenate CSS files into a single file with this name.
  -l, --lower           Write the disassembly in lower case.
  -o, --rebuild-images  Overwrite existing image files.
  -O, --rebuild-audio   Overwrite existing audio files.
  -p, --package-dir     Show path to skoolkit package directory and exit.
  -P PAGES, --pages PAGES
                        Write only these pages (when using &#39;--write P&#39;).
                        PAGES is a comma-separated list of page IDs.
  -q, --quiet           Be quiet.
  -r PREFIX, --ref-sections PREFIX
                        Show default ref file sections whose names start with
                        PREFIX and exit.
  -R, --ref-file        Show the entire default ref file and exit.
  -s, --search-dirs     Show the locations skool2html.py searches for resources.
  -S DIR, --search DIR  Add this directory to the resource search path. This
                        option may be used multiple times.
  --show-config         Show configuration parameter values.
  -t, --time            Show timings.
  -T THEME, --theme THEME
                        Use this CSS theme. This option may be used multiple
                        times.
  -u, --upper           Write the disassembly in upper case.
  --var name=value      Define a variable that can be used by @if and the SMPL
                        macros. This option may be used multiple times.
  -V, --version         Show SkoolKit version number and exit.
  -w X, --write X       Write only these files, where X is one or more of:
                          d = Disassembly files   o = Other code
                          i = Disassembly index   P = Other pages
                          m = Memory maps
  -W CLASS, --writer CLASS
                        Specify the HTML writer class to use; shorthand for
                        &#39;--config Config/HtmlWriterClass=CLASS&#39;.
</pre></div>
</div>
<p><cite>skool2html.py</cite> searches the following directories for CSS files, JavaScript
files, font files, and files listed in the <a class="reference internal" href="ref-files.html#resources"><span class="std std-ref">[Resources]</span></a> section of the ref
file:</p>
<ul class="simple">
<li><p>The directory that contains the skool file named on the command line</p></li>
<li><p>The current working directory</p></li>
<li><p><cite>./resources</cite></p></li>
<li><p><cite>~/.skoolkit</cite></p></li>
<li><p><cite>$PACKAGE_DIR/resources</cite></p></li>
<li><p>Any other directories specified by the <code class="docutils literal notranslate"><span class="pre">-S</span></code>/<code class="docutils literal notranslate"><span class="pre">--search</span></code> option</p></li>
</ul>
<p>where <cite>$PACKAGE_DIR</cite> is the directory in which the <cite>skoolkit</cite> package is
installed (as shown by <code class="docutils literal notranslate"><span class="pre">skool2html.py</span> <span class="pre">-p</span></code>). When you need a reminder of these
locations, run <code class="docutils literal notranslate"><span class="pre">skool2html.py</span> <span class="pre">-s</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-T</span></code> option sets the CSS theme. For example, if <cite>game.ref</cite> specifies the
CSS files to use thus:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[Game]
StyleSheet=skoolkit.css;game.css
</pre></div>
</div>
<p>then:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2html.py -T dark -T wide game.skool
</pre></div>
</div>
<p>will use the following CSS files, if they exist, in the order listed:</p>
<ul class="simple">
<li><p><cite>skoolkit.css</cite></p></li>
<li><p><cite>skoolkit-dark.css</cite></p></li>
<li><p><cite>skoolkit-wide.css</cite></p></li>
<li><p><cite>game.css</cite></p></li>
<li><p><cite>game-dark.css</cite></p></li>
<li><p><cite>game-wide.css</cite></p></li>
<li><p><cite>dark.css</cite></p></li>
<li><p><cite>wide.css</cite></p></li>
</ul>
<section id="skool2html-conf">
<span id="id12"></span><h3>Configuration<a class="headerlink" href="#skool2html-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>skool2html.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AsmLabels</span></code> - use ASM labels (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AsmOnePage</span></code> - write all routines and data blocks to a single page (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
or to multiple pages (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - convert addresses and instruction operands to hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>), or leave them as they are (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>),
or leave it as it is (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CreateLabels</span></code> - create default labels for unlabelled instructions (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> - the format of the default label for the first instruction in
a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">L{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> - the format of the default label for an instruction
other than the first in a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">{main}_{index}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JoinCss</span></code> - if specified, concatenate CSS files into a single file with
this name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputDir</span></code> - write files in this directory (default: <code class="docutils literal notranslate"><span class="pre">.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Quiet</span></code> - be quiet (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or verbose (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RebuildAudio</span></code> - overwrite existing audio files (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or leave them
alone (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RebuildImages</span></code> - overwrite existing image files (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or leave them
alone (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Search</span></code> - directory to add to the resource search path; to specify two or
more directories, separate them with commas</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Theme</span></code> - CSS theme to use; to specify two or more themes, separate them
with commas</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span></code> - show timings (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> are standard Python format strings.
<code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the routine or data block as it appears in the
skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the routine or data block as an integer</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the instruction as it appears in the skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - 0 for the first unlabelled instruction in the routine or data
block, 1 for the second, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the instruction as an integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> - the label of the first instruction in the routine or data block</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2html]</span></code> section. For
example, to make <cite>skool2html.py</cite> use ASM labels and write the disassembly in
hexadecimal by default (without having to use the <code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-a</span></code> options on
the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2html]
AsmLabels=1
Base=16
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--rebuild-audio</span></code> option and the <code class="docutils literal notranslate"><span class="pre">RebuildAudio</span></code>
configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>8.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> configuration
parameters</p></td>
</tr>
<tr class="row-even"><td><p>7.0</p></td>
<td><p>Writes a single disassembly from the skool file given by the
first positional argument</p></td>
</tr>
<tr class="row-odd"><td><p>6.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--var</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>5.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--asm-one-page</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.0</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--theme</span></code> option also looks for a CSS file whose base name
matches the theme name</p></td>
</tr>
<tr class="row-even"><td><p>4.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--search</span></code> and <code class="docutils literal notranslate"><span class="pre">--writer</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>4.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--ref-sections</span></code> and <code class="docutils literal notranslate"><span class="pre">--ref-file</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>3.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--join-css</span></code> and <code class="docutils literal notranslate"><span class="pre">--search-dirs</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>3.5</p></td>
<td><p>Added support for multiple CSS themes</p></td>
</tr>
<tr class="row-even"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-a</span></code> and <code class="docutils literal notranslate"><span class="pre">-C</span></code> options and the long options</p></td>
</tr>
<tr class="row-odd"><td><p>3.3.2</p></td>
<td><p>Added <cite>$PACKAGE_DIR/resources</cite> to the search path; added the
<code class="docutils literal notranslate"><span class="pre">-p</span></code> and <code class="docutils literal notranslate"><span class="pre">-T</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>3.2</p></td>
<td><p>Added <cite>~/.skoolkit</cite> to the search path</p></td>
</tr>
<tr class="row-odd"><td><p>3.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>3.0.2</p></td>
<td><p>No longer shows timings by default; added the <code class="docutils literal notranslate"><span class="pre">-t</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>2.3.1</p></td>
<td><p>Added support for reading multiple ref files per disassembly</p></td>
</tr>
<tr class="row-even"><td><p>2.2.2</p></td>
<td><p>Added the ability to read a skool file from standard input</p></td>
</tr>
<tr class="row-odd"><td><p>2.2</p></td>
<td><p>No longer writes the Skool Daze and Back to Skool disassemblies
by default; added the <code class="docutils literal notranslate"><span class="pre">-d</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>2.1.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-l</span></code>, <code class="docutils literal notranslate"><span class="pre">-u</span></code>, <code class="docutils literal notranslate"><span class="pre">-D</span></code> and <code class="docutils literal notranslate"><span class="pre">-H</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>2.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-o</span></code> and <code class="docutils literal notranslate"><span class="pre">-P</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>1.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sna2ctl-py">
<span id="id13"></span><h2>sna2ctl.py<a class="headerlink" href="#sna2ctl-py" title="Permalink to this heading">¶</a></h2>
<p><cite>sna2ctl.py</cite> generates a control file for a binary (raw memory) file or a SNA,
SZX or Z80 snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2ctl.py game.z80 &gt; game.ctl
</pre></div>
</div>
<p>Now <cite>game.ctl</cite> can be used by <a class="reference internal" href="#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> to convert <cite>game.z80</cite> into a
skool file split into blocks of code and data.</p>
<p><cite>sna2ctl.py</cite> supports several options; run it with no arguments to see a list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: sna2ctl.py [options] FILE

Generate a control file for a binary (raw memory) file or a SNA, SZX or Z80
snapshot. FILE may be a regular file, or &#39;-&#39; for standard input.

Options:
  -C, --comments        Generate instruction comments.
  -e ADDR, --end ADDR   Stop at this address (default=65536).
  -h, --hex             Write upper case hexadecimal addresses.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -l, --hex-lower       Write lower case hexadecimal addresses.
  -m FILE, --map FILE   Use FILE as a code execution map.
  -o ADDR, --org ADDR   Specify the origin address of a binary file (default:
                        65536 - length).
  -p PAGE, --page PAGE  Specify the page (0-7) of a 128K snapshot to map to
                        49152-65535.
  -r, --handle-rst      Handle RST instruction arguments.
  --show-config         Show configuration parameter values.
  -s ADDR, --start ADDR
                        Start at this address.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>If the input filename does not end with ‘.sna’, ‘.szx’ or ‘.z80’, it is assumed
to be a binary file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-m</span></code> option may be used to specify a code execution map to use when
generating a control file. The supported file formats are:</p>
<ul class="simple">
<li><p>Files created by the <code class="docutils literal notranslate"><span class="pre">--map</span></code> option of <a class="reference internal" href="#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a> or <a class="reference internal" href="#trace-py"><span class="std std-ref">trace.py</span></a></p></li>
<li><p>Profiles created by the Fuse emulator</p></li>
<li><p>Code execution logs created by the SpecEmu, Spud and Zero emulators</p></li>
<li><p>Map files created by the SpecEmu and Z80 emulators</p></li>
</ul>
<p>If the file specified by the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option is 8192 bytes long, it is assumed to
be a Z80 map file; if it is 65536 bytes long, it is assumed to be a SpecEmu map
file; otherwise it is assumed to be in one of the other supported formats.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--handle-rst</span></code> option activates the <a class="reference internal" href="components.html#rsthandler"><span class="std std-ref">RST handler</span></a>. When this handler
identifies the byte/word argument(s) of an RST instruction, a <a class="reference internal" href="control-files.html#bdirective"><span class="std std-ref">B directive</span></a>
or <a class="reference internal" href="control-files.html#wdirective"><span class="std std-ref">W directive</span></a> is generated accordingly.</p>
<section id="sna2ctl-conf">
<span id="id14"></span><h3>Configuration<a class="headerlink" href="#sna2ctl-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>sna2ctl.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Comments</span></code> - generate instruction comments (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the
default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> - the name of a file containing a list of allowed words, one
per line; if specified, a string of characters will be marked as text only if
it contains at least one of the words in this file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HandleRST</span></code> - activate the <a class="reference internal" href="components.html#rsthandler"><span class="std std-ref">RST handler</span></a> (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the
default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Hex</span></code> - write addresses in decimal (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default), lower case
hexadecimal (<code class="docutils literal notranslate"><span class="pre">1</span></code>),  or upper case hexadecimal (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextChars</span></code> - characters eligible for being marked as text (default:
letters, digits, space, and the following non-alphanumeric characters:
<code class="docutils literal notranslate"><span class="pre">!&quot;$%&amp;\'()*+,-./:;&lt;=&gt;?[]</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextMinLengthCode</span></code> - the minimum length of a string of characters eligible
for being marked as text in a block identified as code (default: <code class="docutils literal notranslate"><span class="pre">12</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextMinLengthData</span></code> - the minimum length of a string of characters eligible
for being marked as text in a block identified as data (default: <code class="docutils literal notranslate"><span class="pre">3</span></code>)</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[sna2ctl]</span></code> section. For example,
to make <cite>sna2ctl.py</cite> write upper case hexadecimal addresses by default (without
having to use the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option on the command line), add the following section
to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[sna2ctl]
Hex=2
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--handle-rst</span></code> option and the <code class="docutils literal notranslate"><span class="pre">HandleRST</span></code>
configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>9.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--comments</span></code> option and the <code class="docutils literal notranslate"><span class="pre">Comments</span></code>
configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>9.2</p></td>
<td><p>Added support for reading code execution maps produced by
<a class="reference internal" href="#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>7.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>7.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>7.0</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sna2img-py">
<span id="id15"></span><h2>sna2img.py<a class="headerlink" href="#sna2img-py" title="Permalink to this heading">¶</a></h2>
<p><cite>sna2img.py</cite> converts the screenshot or other graphic data in a binary (raw
memory) file, SCR file, skool file, or SNA/SZX/Z80 snapshot into a PNG file.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2img.py game.scr
</pre></div>
</div>
<p>will create a file named <cite>game.png</cite>.</p>
<p>To list the options supported by <cite>sna2img.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: sna2img.py [options] INPUT [OUTPUT]

Convert a Spectrum screenshot or other graphic data into a PNG file. INPUT may
be a binary (raw memory) file, a SCR file, a skool file, or a SNA, SZX or Z80
snapshot.

Options:
  -b, --bfix            Parse a skool file in @bfix mode.
  -B, --binary          Read the input as a binary (raw memory) file.
  -e MACRO, --expand MACRO
                        Expand a #FONT, #SCR, #UDG or #UDGARRAY macro. The &#39;#&#39;
                        prefix may be omitted.
  -f N, --flip N        Flip the image horizontally (N=1), vertically (N=2),
                        or both (N=3).
  -i, --invert          Invert video for cells that are flashing.
  -m src,size,dest, --move src,size,dest
                        Move a block of bytes of the given size from src to
                        dest. This option may be used multiple times.
  -n, --no-animation    Do not animate flashing cells.
  -o X,Y, --origin X,Y  Top-left crop at (X,Y).
  -O ORG, --org ORG     Set the origin address of a binary file (default:
                        65536 minus the length of the file).
  -p a[-b[-c]],[^+]v, --poke a[-b[-c]],[^+]v
                        POKE N,v for N in {a, a+c, a+2c..., b}. Prefix &#39;v&#39;
                        with &#39;^&#39; to perform an XOR operation, or &#39;+&#39; to
                        perform an ADD operation. This option may be used
                        multiple times.
  -r N, --rotate N      Rotate the image 90*N degrees clockwise.
  -s SCALE, --scale SCALE
                        Set the scale of the image (default=1).
  -S WxH, --size WxH    Crop to this width and height (in tiles).
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--binary</span></code> and <code class="docutils literal notranslate"><span class="pre">--org</span></code> options and the ability to
read binary (raw memory) files; the <code class="docutils literal notranslate"><span class="pre">--move</span></code> and <code class="docutils literal notranslate"><span class="pre">--poke</span></code>
options accept hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Added the ability to read skool files; added the <code class="docutils literal notranslate"><span class="pre">--bfix</span></code> and
<code class="docutils literal notranslate"><span class="pre">--move</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>6.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--expand</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.4</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sna2skool-py">
<span id="id16"></span><h2>sna2skool.py<a class="headerlink" href="#sna2skool-py" title="Permalink to this heading">¶</a></h2>
<p><cite>sna2skool.py</cite> converts a binary (raw memory) file or a SNA, SZX or Z80
snapshot into a skool file. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2skool.py game.z80 &gt; game.skool
</pre></div>
</div>
<p>Now <cite>game.skool</cite> can be converted into a browsable HTML disassembly using
<a class="reference internal" href="#skool2html-py"><span class="std std-ref">skool2html.py</span></a>, or into an assembler-ready ASM file using
<a class="reference internal" href="#skool2asm-py"><span class="std std-ref">skool2asm.py</span></a>.</p>
<p><cite>sna2skool.py</cite> supports several options; run it with no arguments to see a
list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: sna2skool.py [options] FILE

Convert a binary (raw memory) file or a SNA, SZX or Z80 snapshot into a skool
file. FILE may be a regular file, or &#39;-&#39; for standard input.

Options:
  -c PATH, --ctl PATH   Specify a control file to use, or a directory from
                        which to read control files. PATH may be &#39;-&#39; for
                        standard input, or &#39;0&#39; to use no control file. This
                        option may be used multiple times.
  -C, --comments        Generate instruction comments.
  -d SIZE, --defb SIZE  Disassemble as DEFB statements of this size.
  -e ADDR, --end ADDR   Stop disassembling at this address (default: 65536).
  -H, --hex             Write hexadecimal addresses and operands in the
                        disassembly.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -l, --lower           Write the disassembly in lower case.
  -o ADDR, --org ADDR   Specify the origin address of a binary (.bin) file
                        (default: 65536 - length).
  -p PAGE, --page PAGE  Specify the page (0-7) of a 128K snapshot to map to
                        49152-65535.
  -r, --handle-rst      Handle RST instruction arguments.
  --show-config         Show configuration parameter values.
  -s ADDR, --start ADDR
                        Start disassembling at this address.
  -V, --version         Show SkoolKit version number and exit.
  -w W, --line-width W  Set the maximum line width of the skool file (default:
                        79).
</pre></div>
</div>
<p>If the input filename does not end with ‘.sna’, ‘.szx’ or ‘.z80’, it is assumed
to be a binary file.</p>
<p>By default, any files whose names start with the input filename (minus the
‘.bin’, ‘.sna’, ‘.szx’ or ‘.z80’ suffix, if any) and end with ‘.ctl’ will be
used as <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control files</span></a>.</p>
<p>There are three options and configuration parameters that control whether
<cite>sna2skool.py</cite> generates a comment for an instruction that has no comment
defined in a control file. They are mutually exclusive and operate in the
following order:</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">--comments</span></code> option or <code class="docutils literal notranslate"><span class="pre">Comments</span></code> configuration parameter (uses the
<a class="reference internal" href="components.html#commentgenerator"><span class="std std-ref">comment generator</span></a> component)</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">Text</span></code> configuration parameter (shows byte values as ASCII text)</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">Timings</span></code> configuration parameter (shows instruction timings)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">--handle-rst</span></code> option activates the <a class="reference internal" href="components.html#rsthandler"><span class="std std-ref">RST handler</span></a>. When this handler
identifies the byte/word argument(s) of an RST instruction, a DEFB/DEFW
statement is produced accordingly. This is useful only if no control file is
used, or if the control file does not already contain <code class="docutils literal notranslate"><span class="pre">B</span></code> or <code class="docutils literal notranslate"><span class="pre">W</span></code> directives
for RST instruction arguments.</p>
<section id="sna2skool-conf">
<span id="id17"></span><h3>Configuration<a class="headerlink" href="#sna2skool-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>sna2skool.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - write addresses and instruction operands in hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Comments</span></code> - generate instruction comments (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the
default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CommentWidthMin</span></code> - minimum width of the instruction comment field in the
skool file (default: <code class="docutils literal notranslate"><span class="pre">10</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DefbSize</span></code> - maximum number of bytes in a DEFB statement (default: <code class="docutils literal notranslate"><span class="pre">8</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DefmSize</span></code> - maximum number of characters in a DEFM statement (default:
<code class="docutils literal notranslate"><span class="pre">65</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DefwSize</span></code> - maximum number of words in a DEFW statement (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointRef</span></code> - template used to format the comment for an entry point
with exactly one referrer (default: <code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">entry</span> <span class="pre">point</span> <span class="pre">is</span> <span class="pre">used</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">routine</span>
<span class="pre">at</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointRefs</span></code> - template used to format the comment for an entry point
with two or more referrers (default: <code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">entry</span> <span class="pre">point</span> <span class="pre">is</span> <span class="pre">used</span> <span class="pre">by</span> <span class="pre">the</span>
<span class="pre">routines</span> <span class="pre">at</span> <span class="pre">{refs}</span> <span class="pre">and</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HandleRST</span></code> - activate the <a class="reference internal" href="components.html#rsthandler"><span class="std std-ref">RST handler</span></a> (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the
default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InstructionWidth</span></code> - minimum width of the instruction field in the skool
file (default: <code class="docutils literal notranslate"><span class="pre">13</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LineWidth</span></code> - maximum line width of the skool file (default: <code class="docutils literal notranslate"><span class="pre">79</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ListRefs</span></code> - when to add a comment that lists routine or entry point
referrers: never (<code class="docutils literal notranslate"><span class="pre">0</span></code>), if no other comment is defined at the entry point
(<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or always (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Opcodes</span></code> - comma-separated list of values specifying additional opcode
sequences to disassemble (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ref</span></code> - template used to format the comment for a routine with exactly one
referrer (default: <code class="docutils literal notranslate"><span class="pre">Used</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">routine</span> <span class="pre">at</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RefFormat</span></code> - template used to format referrers in the <code class="docutils literal notranslate"><span class="pre">{ref}</span></code> and
<code class="docutils literal notranslate"><span class="pre">{refs}</span></code> fields of the <code class="docutils literal notranslate"><span class="pre">Ref</span></code> and <code class="docutils literal notranslate"><span class="pre">Refs</span></code> templates (default:
<code class="docutils literal notranslate"><span class="pre">#R{address}</span></code>); the replacement field <code class="docutils literal notranslate"><span class="pre">address</span></code> is the address of the
referrer formatted as a decimal or hexadecimal number in accordance with the
<code class="docutils literal notranslate"><span class="pre">Base</span></code> and <code class="docutils literal notranslate"><span class="pre">Case</span></code> configuration parameters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Refs</span></code> - template used to format the comment for a routine with two or more
referrers (default: <code class="docutils literal notranslate"><span class="pre">Used</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">routines</span> <span class="pre">at</span> <span class="pre">{refs}</span> <span class="pre">and</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Semicolons</span></code> - block types (<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>,
<code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">w</span></code>) in which comment semicolons are written for instructions that
have no comment (default: <code class="docutils literal notranslate"><span class="pre">c</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Text</span></code> - show ASCII text in the comment fields (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timings</span></code> - show instruction timings in the comment fields (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or
don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-b</span></code> - template used to format the title for an untitled ‘b’ block
(default: <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">block</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-c</span></code> - template used to format the title for an untitled ‘c’ block
(default: <code class="docutils literal notranslate"><span class="pre">Routine</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-g</span></code> - template used to format the title for an untitled ‘g’ block
(default: <code class="docutils literal notranslate"><span class="pre">Game</span> <span class="pre">status</span> <span class="pre">buffer</span> <span class="pre">entry</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-i</span></code> - template used to format the title for an untitled ‘i’ block
(default: <code class="docutils literal notranslate"><span class="pre">Ignored</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-s</span></code> - template used to format the title for an untitled ‘s’ block
(default: <code class="docutils literal notranslate"><span class="pre">Unused</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-t</span></code> - template used to format the title for an untitled ‘t’ block
(default: <code class="docutils literal notranslate"><span class="pre">Message</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-u</span></code> - template used to format the title for an untitled ‘u’ block
(default: <code class="docutils literal notranslate"><span class="pre">Unused</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-w</span></code> - template used to format the title for an untitled ‘w’ block
(default: <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">block</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Wrap</span></code> - disassemble an instruction that wraps around the 64K boundary
(<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">Opcodes</span></code> list is empty by default, but may contain any of the following
values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ED63</span></code> - LD (nn),HL (4-byte variant)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ED6B</span></code> - LD HL,(nn) (4-byte variant)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ED70</span></code> - IN F,(C)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ED71</span></code> - OUT (C),0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IM</span></code> - IM 0/1/2 variants (ED followed by 4E/66/6E/76/7E)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NEG</span></code> - NEG variants (ED followed by 4C/54/5C/64/6C/74/7C)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RETN</span></code> - RETN variants (ED followed by 55/5D/65/6D/75/7D)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XYCB</span></code> - undocumented instructions with DDCB or FDCB opcode prefixes (see
below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALL</span></code> - all of the above</p></li>
</ul>
<p>When <code class="docutils literal notranslate"><span class="pre">XYCB</span></code> is in the list, the following instructions are disassembled
(where ‘XY’ is IX or IY, and ‘r’ is B, C, D, E, H, L or A):</p>
<ul class="simple">
<li><p>RLC (XY+d),r</p></li>
<li><p>RRC (XY+d),r</p></li>
<li><p>RL (XY+d),r</p></li>
<li><p>RR (XY+d),r</p></li>
<li><p>SLA (XY+d),r</p></li>
<li><p>SRA (XY+d),r</p></li>
<li><p>SLL (XY+d),r</p></li>
<li><p>SRL (XY+d),r</p></li>
<li><p>BIT n,(XY+d) (variants)</p></li>
<li><p>RES n,(XY+d),r</p></li>
<li><p>SET n,(XY+d),r</p></li>
</ul>
<p>Whenever an instruction with a variant opcode sequence is disassembled,
<cite>sna2skool.py</cite> will insert a <a class="reference internal" href="asm.html#bytes"><span class="std std-ref">&#64;bytes</span></a> directive into the skool file (if one
is not already provided by a control file) to ensure that the instruction
assembles back to the same byte values when processed by <a class="reference internal" href="#skool2asm-py"><span class="std std-ref">skool2asm.py</span></a>,
<a class="reference internal" href="#skool2html-py"><span class="std std-ref">skool2html.py</span></a> or <a class="reference internal" href="#skool2bin-py"><span class="std std-ref">skool2bin.py</span></a>.</p>
<p>Also note that if your skool file contains any non-standard instructions (such
as ‘IN F,(C)’) or instructions that derive from variant opcode sequences (such
as ‘BIT 0,(IX+0)’ from DDCB0040 instead of the standard DDCB0046), care must be
taken when using an assembler on the output of <a class="reference internal" href="#skool2asm-py"><span class="std std-ref">skool2asm.py</span></a> to ensure
that instructions not only assemble successfully, but also assemble back to the
original byte values, if desired. The <a class="reference internal" href="asm.html#isub"><span class="std std-ref">&#64;isub</span></a> directive may be used for
this purpose; for example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>@isub=DEFB 221,203,0,64 ; This is BIT 0,(IX+0)
 40000 BIT 0,(IX+0) ; The opcode sequence here is DDCB0040
</pre></div>
</div>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[sna2skool]</span></code> section. For example,
to make <cite>sna2skool.py</cite> generate hexadecimal skool files with a line width of
120 characters by default (without having to use the <code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-w</span></code> options
on the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[sna2skool]
Base=16
LineWidth=120
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--handle-rst</span></code> option and the <code class="docutils literal notranslate"><span class="pre">HandleRST</span></code>
configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>9.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--comments</span></code> option and the <code class="docutils literal notranslate"><span class="pre">Comments</span></code>
configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>9.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Opcodes</span></code> configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>8.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--defb</span></code> option and the <code class="docutils literal notranslate"><span class="pre">Timings</span></code> configuration
parameter</p></td>
</tr>
<tr class="row-even"><td><p>8.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Wrap</span></code> configuration parameter and the ability to
disassemble an instruction that wraps around the 64K boundary;
added the <code class="docutils literal notranslate"><span class="pre">RefFormat</span></code> configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>8.4</p></td>
<td><p>Changed the default value of the <code class="docutils literal notranslate"><span class="pre">DefmSize</span></code> configuration
parameter from 66 to 65</p></td>
</tr>
<tr class="row-even"><td><p>8.3</p></td>
<td><p>Added support for reading control files from a directory
(<code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">DIR</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>8.1</p></td>
<td><p>Added support for ignoring default control files (<code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">0</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>8.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">DefwSize</span></code> configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>7.1</p></td>
<td><p>Added support for reading multiple default control files, and for
using the <code class="docutils literal notranslate"><span class="pre">--ctl</span></code> option multiple times; added the
<code class="docutils literal notranslate"><span class="pre">CommentWidthMin</span></code>, <code class="docutils literal notranslate"><span class="pre">InstructionWidth</span></code> and <code class="docutils literal notranslate"><span class="pre">Semicolons</span></code>
configuration parameters</p></td>
</tr>
<tr class="row-even"><td><p>7.0</p></td>
<td><p>The short option for <code class="docutils literal notranslate"><span class="pre">--lower</span></code> is <code class="docutils literal notranslate"><span class="pre">-l</span></code>; the long option for
<code class="docutils literal notranslate"><span class="pre">-H</span></code> is <code class="docutils literal notranslate"><span class="pre">--hex</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> option; the <code class="docutils literal notranslate"><span class="pre">--end</span></code>, <code class="docutils literal notranslate"><span class="pre">--org</span></code> and
<code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>6.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>4.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--end</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>4.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--line-width</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option and the long options, and the ability to
add a comment listing referrers at every routine entry point</p></td>
</tr>
<tr class="row-even"><td><p>3.3</p></td>
<td><p>Added the ability to read 128K SNA snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>3.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option, and the ability to read SZX snapshots
and 128K Z80 snapshots</p></td>
</tr>
<tr class="row-even"><td><p>2.1.2</p></td>
<td><p>Added the ability to write the disassembly in lower case</p></td>
</tr>
<tr class="row-odd"><td><p>2.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-H</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>2.0.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-o</span></code> option, and the ability to read binary files, to
set the maximum number of characters in a DEFM statement, and to
suppress comments that list routine entry point referrers</p></td>
</tr>
<tr class="row-odd"><td><p>2.0</p></td>
<td><p>Added the ability to set the maximum number of bytes in a DEFB
statement</p></td>
</tr>
<tr class="row-even"><td><p>1.0.5</p></td>
<td><p>Added the ability to show ASCII text in comment fields</p></td>
</tr>
<tr class="row-odd"><td><p>1.0.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="snapinfo-py">
<span id="id18"></span><h2>snapinfo.py<a class="headerlink" href="#snapinfo-py" title="Permalink to this heading">¶</a></h2>
<p><cite>snapinfo.py</cite> shows information on the registers or RAM in a binary (raw
memory) file or a SNA, SZX or Z80 snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapinfo.py game.z80
</pre></div>
</div>
<p>To list the options supported by <cite>snapinfo.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: snapinfo.py [options] file

Analyse a binary (raw memory) file or a SNA, SZX or Z80 snapshot.

Options:
  -b, --basic           List the BASIC program.
  -c PATH, --ctl PATH   When generating a call graph, specify a control file
                        to use, or a directory from which to read control
                        files. PATH may be &#39;-&#39; for standard input. This option
                        may be used multiple times.
  -f A[,B...[-M[-N]]], --find A[,B...[-M[-N]]]
                        Search for the byte sequence A,B... with distance
                        ranging from M to N (default=1) between bytes.
  -g, --call-graph      Generate a call graph in DOT format.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -o ADDR, --org ADDR   Specify the origin address of a binary (raw memory)
                        file (default: 65536 - length).
  -p A[-B[-C]], --peek A[-B[-C]]
                        Show the contents of addresses A TO B STEP C. This
                        option may be used multiple times.
  -P PAGE, --page PAGE  Specify the page (0-7) of a 128K snapshot to map to
                        49152-65535.
  --show-config         Show configuration parameter values.
  -t TEXT, --find-text TEXT
                        Search for a text string.
  -T X,Y[-M[-N]], --find-tile X,Y[-M[-N]]
                        Search for the graphic data of the tile at (X,Y) with
                        distance ranging from M to N (default=1) between
                        bytes.
  -v, --variables       List variables.
  -V, --version         Show SkoolKit version number and exit.
  -w A[-B[-C]], --word A[-B[-C]]
                        Show the words at addresses A TO B STEP C. This option
                        may be used multiple times.
</pre></div>
</div>
<p>With no options, <cite>snapinfo.py</cite> displays register values, the interrupt mode,
the border colour, and various other attributes. By using one of the options
shown above, it can list the BASIC program and variables (if present), show the
contents of a range of addresses, search the RAM for a sequence of byte values
or a text string, or generate a call graph.</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">--find</span></code>, <code class="docutils literal notranslate"><span class="pre">--find-text</span></code> and <code class="docutils literal notranslate"><span class="pre">--find-tile</span></code> options search
all RAM banks in a 128K snapshot; use the <code class="docutils literal notranslate"><span class="pre">--page</span></code> option to restrict the
search to the address range 16384-65535 (0x4000-0xFFFF).</p>
<section id="call-graphs">
<span id="snapinfo-call-graph"></span><h3>Call graphs<a class="headerlink" href="#call-graphs" title="Permalink to this heading">¶</a></h3>
<p><cite>snapinfo.py</cite> can generate a call graph in <a class="reference external" href="https://graphviz.gitlab.io/doc/info/lang.html">DOT format</a> from a snapshot and a
corresponding control file. For example, if <cite>game.ctl</cite> is present alongside
<cite>game.z80</cite>, then:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapinfo.py -g game.z80 &gt; game.dot
</pre></div>
</div>
<p>will produce a call graph in <cite>game.dot</cite>, with a node for each routine declared
in <cite>game.ctl</cite>, and an edge between two nodes whenever the routine represented
by the first node calls, jumps to, or continues into the routine represented by
the second node.</p>
<p>To create a PNG image file named <cite>game.png</cite> from <cite>game.dot</cite>, the <cite>dot</cite> utility
(included in <a class="reference external" href="https://graphviz.gitlab.io/">Graphviz</a>) may be used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dot -Tpng game.dot &gt; game.png
</pre></div>
</div>
<p>A call graph may contain one or more ‘orphans’, an orphan being a node that is
not at the head of any arrow, and thus represents a routine that is (as far as
<cite>snapinfo.py</cite> can tell) not used by any other routines. To declare the callers
of such a routine (in case it is not a true orphan), the <a class="reference internal" href="asm.html#refs"><span class="std std-ref">&#64;refs</span></a> directive
may be used.</p>
<p>To help identify orphan nodes and missing edges, each of the first three lines
of the DOT file produced by <cite>snapinfo.py</cite> contains a list of IDs of the
following types of node:</p>
<ul class="simple">
<li><p>unconnected nodes</p></li>
<li><p>orphan nodes connected to other nodes</p></li>
<li><p>non-orphan nodes whose first instruction is not used</p></li>
</ul>
<p>The appearance of nodes and edges in a call graph image can be configured via
the <code class="docutils literal notranslate"><span class="pre">EdgeAttributes</span></code>, <code class="docutils literal notranslate"><span class="pre">GraphAttributes</span></code>, <code class="docutils literal notranslate"><span class="pre">NodeAttributes</span></code> and
<code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> configuration parameters (see below).</p>
</section>
<section id="snapinfo-conf">
<span id="id19"></span><h3>Configuration<a class="headerlink" href="#snapinfo-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>snapinfo.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">EdgeAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/doc/info/attrs.html">attributes</a> for edges in a call graph
(default: none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GraphAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/doc/info/attrs.html">attributes</a> for a call graph (default:
none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/doc/info/attrs.html">attributes</a> for nodes in a call graph
(default: <code class="docutils literal notranslate"><span class="pre">shape=record</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeId</span></code> - the format of the node IDs in a call graph (default:
<code class="docutils literal notranslate"><span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> - the format of the node labels in a call graph (default:
<code class="docutils literal notranslate"><span class="pre">&quot;{address}</span> <span class="pre">{address:04X}\n{label}&quot;</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Peek</span></code> - the format of each line of the output produced by the <code class="docutils literal notranslate"><span class="pre">--peek</span></code>
option (default:
<code class="docutils literal notranslate"><span class="pre">{address:&gt;5}</span> <span class="pre">{address:04X}:</span> <span class="pre">{value:&gt;3}</span>&#160; <span class="pre">{value:02X}</span>&#160; <span class="pre">{value:08b}</span>&#160; <span class="pre">{char}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Word</span></code> - the format of each line of the output produced by the <code class="docutils literal notranslate"><span class="pre">--word</span></code>
option (default: <code class="docutils literal notranslate"><span class="pre">{address:&gt;5}</span> <span class="pre">{address:04X}:</span> <span class="pre">{value:&gt;5}</span>&#160; <span class="pre">{value:04X}</span></code>)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">NodeId</span></code> and <code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> are standard Python format strings that recognise
the replacement fields <code class="docutils literal notranslate"><span class="pre">address</span></code> and <code class="docutils literal notranslate"><span class="pre">label</span></code> (the address and label of the
first instruction in the routine represented by the node).</p>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[snapinfo]</span></code> section. For example,
to make <cite>snapinfo.py</cite> use open arrowheads and a cyan background colour in call
graphs by default, add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[snapinfo]
EdgeAttributes=arrowhead=open
GraphAttributes=bgcolor=cyan
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.4</p></td>
<td><p>Shows AY register values in 128K SZX and Z80 snapshots and the
last value written to port $FE in SZX snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>9.3</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--find</span></code>, <code class="docutils literal notranslate"><span class="pre">--find-text</span></code> and <code class="docutils literal notranslate"><span class="pre">--find-tile</span></code> options
search all RAM banks in a 128K snapshot by default</p></td>
</tr>
<tr class="row-even"><td><p>9.0</p></td>
<td><p>Shows the current AY register in 128K SZX and Z80 snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>8.10</p></td>
<td><p>Shows the value of the T-states counter and the issue 2 emulation
flag in SZX and Z80 snapshots</p></td>
</tr>
<tr class="row-even"><td><p>8.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Peek</span></code> and <code class="docutils literal notranslate"><span class="pre">Word</span></code> configuration parameters</p></td>
</tr>
<tr class="row-odd"><td><p>8.3</p></td>
<td><p>Added support for reading control files from a directory
(<code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">DIR</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>8.2</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
ability to read binary files; added the <code class="docutils literal notranslate"><span class="pre">--call-graph</span></code>,
<code class="docutils literal notranslate"><span class="pre">--ctl</span></code>, <code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--org</span></code>, <code class="docutils literal notranslate"><span class="pre">--page</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code>
options</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--find</span></code>, <code class="docutils literal notranslate"><span class="pre">--find-tile</span></code>, <code class="docutils literal notranslate"><span class="pre">--peek</span></code> and <code class="docutils literal notranslate"><span class="pre">--word</span></code>
options accept hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>6.0</p></td>
<td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--find</span></code> option for distance ranges; added
the <code class="docutils literal notranslate"><span class="pre">--find-tile</span></code> and <code class="docutils literal notranslate"><span class="pre">--word</span></code> options; the <code class="docutils literal notranslate"><span class="pre">--peek</span></code> option
shows UDGs and BASIC tokens</p></td>
</tr>
<tr class="row-odd"><td><p>5.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--variables</span></code> option; UDGs in a BASIC program are
shown as special symbols (e.g. <code class="docutils literal notranslate"><span class="pre">{UDG-A}</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>5.3</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="snapmod-py">
<span id="id20"></span><h2>snapmod.py<a class="headerlink" href="#snapmod-py" title="Permalink to this heading">¶</a></h2>
<p><cite>snapmod.py</cite> modifies the registers and RAM in an SZX or Z80 snapshot. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapmod.py --poke 32768,0 game.z80 poked.z80
</pre></div>
</div>
<p>To list the options supported by <cite>snapmod.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: snapmod.py [options] infile [outfile]

Modify an SZX or Z80 snapshot.

Options:
  -m [s:]src,size,[d:]dest, --move [s:]src,size,[d:]dest
                        Copy a block of bytes of the given size from src in
                        RAM bank s to dest in RAM bank d. This option may be
                        used multiple times.
  --patch [p:]a,file    Apply a binary patch file at address &#39;a&#39; in RAM bank
                        &#39;p&#39;. This option may be used multiple times.
  -p [p:]a[-b[-c]],[^+]v, --poke [p:]a[-b[-c]],[^+]v
                        POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}.
                        Prefix &#39;v&#39; with &#39;^&#39; to perform an XOR operation, or
                        &#39;+&#39; to perform an ADD operation. This option may be
                        used multiple times.
  -r name=value, --reg name=value
                        Set the value of a register. Do &#39;--reg help&#39; for more
                        information. This option may be used multiple times.
  -s name=value, --state name=value
                        Set a hardware state attribute. Do &#39;--state help&#39; for
                        more information. This option may be used multiple
                        times.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--patch</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>9.1</p></td>
<td><p>Added support for modifying SZX snapshots and 128K snapshots; the
<code class="docutils literal notranslate"><span class="pre">--move</span></code> and <code class="docutils literal notranslate"><span class="pre">--poke</span></code> options can modify specific RAM banks</p></td>
</tr>
<tr class="row-even"><td><p>8.10</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">issue2</span></code> hardware state attribute</p></td>
</tr>
<tr class="row-odd"><td><p>8.9</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">tstates</span></code> hardware state attribute</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--move</span></code>, <code class="docutils literal notranslate"><span class="pre">--poke</span></code> and <code class="docutils literal notranslate"><span class="pre">--reg</span></code> options accept
hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>5.3</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tap2sna-py">
<span id="id21"></span><h2>tap2sna.py<a class="headerlink" href="#tap2sna-py" title="Permalink to this heading">¶</a></h2>
<p><cite>tap2sna.py</cite> converts one or two PZX, TAP or TZX files (which may be inside a
zip archive) into an SZX or Z80 snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py game.tap game.z80
</pre></div>
</div>
<p>To list the options supported by <cite>tap2sna.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage:
  tap2sna.py [options] INPUT [INPUT] [OUTFILE]
  tap2sna.py @FILE [args]

Convert one or two PZX, TAP or TZX files (which may be inside a zip archive)
into an SZX or Z80 snapshot. INPUT may be the full URL to a remote zip archive
or tape file, or the path to a local file. If two INPUTs are given, they must
both be (local or remote) tape files. Arguments may be read from FILE instead
of (or as well as) being given on the command line.

Options:
  -c name=value, --sim-load-config name=value
                        Set the value of a simulated LOAD configuration
                        parameter. Do &#39;-c help&#39; for more information, or &#39;-c
                        help-name&#39; for help on a specific parameter. This
                        option may be used multiple times.
  -d DIR, --output-dir DIR
                        Write the snapshot file in this directory.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  --press N:KEYS        Pause the tape at block number N and press KEYS before
                        resuming. KEYS must be a space-separated list of key
                        identifiers. This option may be used multiple times.
  -p STACK, --stack STACK
                        Set the stack pointer.
  --ram OPERATION       Perform a load operation or otherwise modify the
                        memory snapshot being built. Do &#39;--ram help&#39; for more
                        information. This option may be used multiple times.
  --reg name=value      Set the value of a register. Do &#39;--reg help&#39; for more
                        information. This option may be used multiple times.
  --show-config         Show configuration parameter values.
  -s START, --start START
                        Set the start address to JP to.
  --state name=value    Set a hardware state attribute. Do &#39;--state help&#39; for
                        more information. This option may be used multiple
                        times.
  --tape-analysis       Show an analysis of the tape&#39;s tones, pulse sequences
                        and data blocks.
  --tape-name NAME      Specify the name of a tape file in a zip archive. Use
                        this option twice when loading two tape files.
  --tape-skip A[-B]     Skip block numbers A-B on the tape.
  --tape-start BLOCK    Start the tape at this block number.
  --tape-stop BLOCK     Stop the tape at this block number.
  --tape-sum MD5SUM     Specify the MD5 checksum of the tape file. This option
                        may be used twice if loading two tape files.
  -u AGENT, --user-agent AGENT
                        Set the User-Agent header.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>Note that <cite>tap2sna.py</cite> cannot read data from TZX block types 0x18 (CSW
recording) or 0x19 (generalized data block).</p>
<p>By default, <cite>tap2sna.py</cite> attempts to load a tape exactly as a 48K Spectrum
would (see <a class="reference internal" href="#tap2sna-sim-load"><span class="std std-ref">Simulated LOAD</span></a>). If that doesn’t work, the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option
can be used to load bytes from specific tape blocks at the appropriate
addresses. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --ram load=3,30000 game.tzx game.z80
</pre></div>
</div>
<p>loads the third block on the tape at address 30000, and ignores all other
blocks. (To see information on the blocks in a tape file, use the
<a class="reference internal" href="#tapinfo-py"><span class="std std-ref">tapinfo.py</span></a> command.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option can also be used to move blocks of bytes from one location
to another, apply a binary patch file, POKE values into individual addresses or
address ranges, modify memory with XOR and ADD operations, initialise the
system variables, or call a Python function to modify the memory snapshot in an
arbitrary way before it is saved. For more information on these operations,
run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --ram help
</pre></div>
</div>
<p>If a game requires loading from both sides of a tape, and each side is in its
own file in a zip archive, they can be loaded by specifying their names in the
desired order using the <code class="docutils literal notranslate"><span class="pre">--tape-name</span></code> option:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --tape-name side1.tzx --tape-name side2.tzx game.zip
</pre></div>
</div>
<p>If each side is in its own file and not in a zip archive, they can be loaded by
specifying them as positional arguments in the desired order:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py side1.tzx side2.tzx
</pre></div>
</div>
<p>When loading from two tape files, and using the <code class="docutils literal notranslate"><span class="pre">--tape-stop</span></code> option to stop
somewhere in the middle of the second tape, the block number argument must be
incremented by the number of blocks in the first tape. For example, if the
first tape has five blocks, <code class="docutils literal notranslate"><span class="pre">--tape-stop</span> <span class="pre">8</span></code> will stop at the third block of
the second tape.</p>
<p>For complex snapshots that require many options to build, it may be more
convenient to store the arguments to <cite>tap2sna.py</cite> in a file. For example, if
the file <cite>game.t2s</cite> has the following contents:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>;
; tap2sna.py file for GAME
;
http://example.com/pub/games/GAME.zip
-c fast-load=0       # Disable fast loading
-c accelerator=none  # Disable tape-sampling loop acceleration
--state issue2=1     # Enable issue 2 keyboard emulation
--start 34816        # Start at 34816
</pre></div>
</div>
<p>then:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py @game.t2s
</pre></div>
</div>
<p>will create <cite>game.z80</cite> as if the arguments specified in <cite>game.t2s</cite> had been
given on the command line. When <cite>tap2sna.py</cite> reads arguments from a file whose
name ends with ‘.t2s’, the output snapshot filename defaults to the name of
that arguments file with ‘.t2s’ replaced by either ‘.z80’ or ‘.szx’ (depending
on the value of the <code class="docutils literal notranslate"><span class="pre">DefaultSnapshotFormat</span></code> configuration parameter).</p>
<section id="simulated-load">
<span id="tap2sna-sim-load"></span><h3>Simulated LOAD<a class="headerlink" href="#simulated-load" title="Permalink to this heading">¶</a></h3>
<p>By default, <cite>tap2sna.py</cite> simulates a freshly booted 48K ZX Spectrum running
LOAD “” (or LOAD “”CODE, if the first block on the tape is a ‘Bytes’ header).
Whenever the Spectrum ROM’s load routine at $0556 is called, a shortcut is
taken by “fast loading” the next block on the tape. All other code (including
any custom loader) is fully simulated. Simulation continues until the program
counter hits the start address given by the <code class="docutils literal notranslate"><span class="pre">--start</span></code> option, or 15 minutes
of simulated Z80 CPU time has elapsed, or the end of the tape is reached and
one of the following conditions is satisfied:</p>
<ul class="simple">
<li><p>a custom loader was detected</p></li>
<li><p>the program counter hits an address outside the ROM</p></li>
<li><p>more than one second of simulated Z80 CPU time has elapsed since the end of
the tape was reached</p></li>
</ul>
<p>A simulated LOAD can also be aborted by pressing Ctrl-C. When a simulated LOAD
has completed or been aborted, the values of the registers (including the
program counter) in the simulator are used to populate the snapshot.</p>
<p>A simulated LOAD can be configured via parameters that are set by the
<code class="docutils literal notranslate"><span class="pre">--sim-load-config</span></code> (or <code class="docutils literal notranslate"><span class="pre">-c</span></code>) option. The recognised configuration
parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accelerate-dec-a</span></code> - enable acceleration of ‘DEC A: JR NZ,$-1’ delay loops
only (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or ‘DEC A: JP NZ,$-1’ delay loops only (<code class="docutils literal notranslate"><span class="pre">2</span></code>), or both (<code class="docutils literal notranslate"><span class="pre">3</span></code>,
the default), or neither (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accelerator</span></code> - a comma-separated list of tape-sampling loop accelerators
to use (see <a class="reference internal" href="#tap2sna-accelerators"><span class="std std-ref">Accelerators</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmio</span></code> - enable simulation of memory contention and I/O contention delays
(<code class="docutils literal notranslate"><span class="pre">1</span></code>), or disable it (<code class="docutils literal notranslate"><span class="pre">0</span></code>); this is disabled by default to improve
performance, but some loaders may require it; when this is enabled, all
acceleration is disabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fast-load</span></code> - enable fast loading whenever the ROM loader is called (<code class="docutils literal notranslate"><span class="pre">1</span></code>,
the default), or disable it (<code class="docutils literal notranslate"><span class="pre">0</span></code>); fast loading (also known as “flash
loading”) significantly reduces the load time for many tapes, but can also
cause some loaders to fail</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">finish-tape</span></code> - run the tape to the end before stopping the simulation at
the address specified by the <code class="docutils literal notranslate"><span class="pre">--start</span></code> option (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or stop the
simulation as soon as that address is reached, regardless of whether the tape
has finished (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first-edge</span></code> - the time (in T-states) from the start of the tape at which
to place the leading edge of the first pulse (default: <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in-flags</span></code> - various flags specifying how to handle ‘IN’ instructions (see
below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load</span></code> - a space-separated list of keys to press to build an alternative
command line to load the tape (see <a class="reference internal" href="#tap2sna-load"><span class="std std-ref">LOAD command</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">machine</span></code> - the type of machine to simulate: a 48K Spectrum (<code class="docutils literal notranslate"><span class="pre">48</span></code>, the
default), or a 128K Spectrum (<code class="docutils literal notranslate"><span class="pre">128</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pause</span></code> - pause the tape between blocks and resume playback when port 254
is read (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or run the tape continuously (<code class="docutils literal notranslate"><span class="pre">0</span></code>); pausing
can help with tapes that require (but do not actually contain) long pauses
between blocks, but can cause some loaders to fail</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">polarity</span></code> - the EAR bit reading produced by the first pulse on the tape:
<code class="docutils literal notranslate"><span class="pre">0</span></code> (the default) or <code class="docutils literal notranslate"><span class="pre">1</span></code>; subsequent pulses give readings that alternate
between 0 and 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span></code> - whether to use the pure Python Z80 simulator (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or the
much faster C version if available (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> - the number of seconds of Z80 CPU time after which to abort the
simulated LOAD if it’s still in progress (default: 900)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trace</span></code> - the file to which to log all instructions executed during the
simulated LOAD (default: none)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">in-flags</span></code> parameter is the sum of the following values, chosen according
to the desired behaviour:</p>
<ul class="simple">
<li><p>1 - interpret ‘IN A,($FE)’ instructions in the address range $4000-$7FFF as
reading the tape (by default they are ignored)</p></li>
<li><p>2 - ignore ‘IN’ instructions in the address range $4000-$FFFF (i.e. in RAM)
that read port $FE</p></li>
<li><p>4 - yield a simulated port reading when executing an ‘IN r,(C)’ instruction
(by default such an instruction always yields the value $FF)</p></li>
</ul>
<p>By default, the EAR bit reading produced by a pulse is 0 if the 0-based index
of the pulse is even (i.e. first, third, fifth pulses etc.), or 1 otherwise.
This can be reversed by setting <code class="docutils literal notranslate"><span class="pre">polarity=1</span></code>. Run <em>tap2sna.py</em> with the
<code class="docutils literal notranslate"><span class="pre">--tape-analysis</span></code> option to see the timings and EAR bit readings of the
pulses on a tape.</p>
</section>
<section id="accelerators">
<span id="tap2sna-accelerators"></span><h3>Accelerators<a class="headerlink" href="#accelerators" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">accelerator</span></code> simulated LOAD configuration parameter must be either a
comma-separated list of specific accelerator names or one of the following
special values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code> - select accelerators automatically (this is the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code> - list the accelerators used during a simulated LOAD, along with the
hit/miss counts generated by the tape-sampling loop detector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code> - disable acceleration; the loading time for a game with a custom
loader that uses an unrecognised tape-sampling loop may be reduced by
specifying this value</p></li>
</ul>
<p>A tape-sampling loop accelerator works by effectively fast-forwarding the tape
(and the state of the loop itself) to the next edge whenever the loop is
entered. This technique is known as “edge loading”.</p>
<p>The output produced by <code class="docutils literal notranslate"><span class="pre">accelerator=list</span></code> looks something like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Accelerators: microsphere: 5500; rom: 793036; misses: 0; dec-a: 800708/0/23
</pre></div>
</div>
<p>This means that:</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">microsphere</span></code> and <code class="docutils literal notranslate"><span class="pre">rom</span></code> tape-sampling loops were detected, 5500 times
and 793036 times respectively</p></li>
<li><p>no instances of an ‘IN A,($FE)’ instruction outside a recognised
tape-sampling loop were executed (0 misses)</p></li>
<li><p>800708 ‘DEC A: JR NZ,$-1’ delay loops were entered, no ‘DEC A: JP NZ,$-1’
delay loops were entered, and 23 instances of ‘DEC A’ outside such delay
loops were executed</p></li>
</ul>
<p>To show the names of the available tape-sampling loop accelerators:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py -c help-accelerator
</pre></div>
</div>
</section>
<section id="load-command">
<span id="tap2sna-load"></span><h3>LOAD command<a class="headerlink" href="#load-command" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">load</span></code> simulated LOAD configuration parameter may be used to specify an
alternative command line to load the tape in cases where neither ‘LOAD “”’ nor
‘LOAD “”CODE’ works. Its value is a space-separated list of ‘words’ (a ‘word’
being a sequence of any characters other than space), each of which is broken
down into a sequence of one or more keypresses. If a word contains the ‘+’
symbol, the tokens it separates are converted into keypresses made
simultaneously. If a word matches a BASIC token, the corresponding sequence of
keypresses to produce that token are substituted. Otherwise, each character in
the word is converted individually into the appropriate keypresses.</p>
<p>The following special tokens are also recognised:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CS</span></code> - CAPS SHIFT</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SS</span></code> - SYMBOL SHIFT</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SPACE</span></code> - SPACE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ENTER</span></code> - ENTER</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOWN</span></code> - Cursor down (‘CS+6’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GOTO</span></code> - GO TO (‘g’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GOSUB</span></code> - GO SUB (‘h’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DEFFN</span></code> - DEF FN (‘CS+SS SS+1’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OPEN#</span></code> - OPEN # (‘CS+SS SS+4’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLOSE#</span></code> - CLOSE # (‘CS+SS SS+5’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PC=address</span></code> - Stop the keyboard input simulation at this address</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">PC=address</span></code> token, if present, must appear last. The default address is
either 0x0605 (when a 48K Spectrum is being simulated) or 0x13BE (on a 128K
Spectrum). The simulated LOAD begins at this address.</p>
<p><code class="docutils literal notranslate"><span class="pre">ENTER</span></code> is automatically appended to the command line if not already present.</p>
<p>For example, the <code class="docutils literal notranslate"><span class="pre">load</span></code> parameter may be set to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CLEAR 34999: LOAD &quot;&quot; CODE : RANDOMIZE USR 35000
</pre></div>
</div>
<p>Note that the spaces around <code class="docutils literal notranslate"><span class="pre">CLEAR</span></code>, <code class="docutils literal notranslate"><span class="pre">LOAD</span></code>, <code class="docutils literal notranslate"><span class="pre">CODE</span></code>, <code class="docutils literal notranslate"><span class="pre">RANDOMIZE</span></code> and
<code class="docutils literal notranslate"><span class="pre">USR</span></code> are required in order for them to be recognised as BASIC tokens.</p>
</section>
<section id="user-input">
<span id="tap2sna-user-input"></span><h3>User input<a class="headerlink" href="#user-input" title="Permalink to this heading">¶</a></h3>
<p>Some tapes require the user to pause the tape before loading has finished,
press one or more keys, and then start the tape again to resume loading. Such
tapes can be handled by using the <code class="docutils literal notranslate"><span class="pre">--press</span></code> option. Its single argument takes
the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>N:KEYS
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">N</span></code> is the block number at which to pause the tape</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KEYS</span></code> is a space-separated list of key identifiers</p></li>
</ul>
<p>For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --press 5:ENTER game.tzx
</pre></div>
</div>
<p>This will load blocks 1-4 of game.tzx, pause the tape, simulate pressing the
ENTER key until the appropriate key row has been read, and then start the tape
(whereupon block 5 and any other remaining blocks will be loaded).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">KEYS</span></code> list recognises the digits 0-9 and lower case letters a-z as valid
key identifiers, along with the following special tokens:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CS</span></code> - CAPS SHIFT</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SS</span></code> - SYMBOL SHIFT</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SPACE</span></code> - SPACE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ENTER</span></code> - ENTER</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code> - no key</p></li>
</ul>
<p>Sometimes a single keypress may need to be read more than once before the
game’s loader responds to it. In such cases the <code class="docutils literal notranslate"><span class="pre">*</span></code> notation is useful:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --press 6:s*3 game.tzx
</pre></div>
</div>
<p>Equivalent to <code class="docutils literal notranslate"><span class="pre">6:s</span> <span class="pre">s</span> <span class="pre">s</span></code>, this will wait until the ‘s’ keypress has been read
three times before resuming the tape at block number 6.</p>
</section>
<section id="tap2sna-conf">
<span id="id22"></span><h3>Configuration<a class="headerlink" href="#tap2sna-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>tap2sna.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DefaultSnapshotFormat</span></code> - the format of the snapshot written when no output
snapshot argument is specified; valid values are <code class="docutils literal notranslate"><span class="pre">z80</span></code> (the default) and
<code class="docutils literal notranslate"><span class="pre">szx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> - the format of each line in the trace log file for a simulated
LOAD (default: <code class="docutils literal notranslate"><span class="pre">${pc:04X}</span> <span class="pre">{i}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceOperand</span></code> - the prefix, byte format, and word format for the numeric
operands of instructions in the trace log file for a simulated LOAD,
separated by commas (default: <code class="docutils literal notranslate"><span class="pre">$,02X,04X</span></code>); the byte and word formats are
standard Python format specifiers for numeric values, and default to empty
strings if not supplied</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UserAgent</span></code> - the value of the User-Agent header in HTTP/HTTPS requests
(default: empty string)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> is a standard Python format string that recognises the following
replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> - the current instruction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m[address]</span></code> - the contents of a memory address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pc</span></code> - the address of the current instruction (program counter)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r[X]</span></code> - the ‘X’ register (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code> - the current timestamp</p></li>
</ul>
<p>When using the <code class="docutils literal notranslate"><span class="pre">m</span></code> (memory) replacement field, <code class="docutils literal notranslate"><span class="pre">address</span></code> must be either a
decimal number, or a hexadecimal number prefixed by ‘$’ or ‘0x’.</p>
<p>The register name <code class="docutils literal notranslate"><span class="pre">X</span></code> in <code class="docutils literal notranslate"><span class="pre">r[X]</span></code> must be one of the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a b c d e f h l bc de hl
^a ^b ^c ^d ^e ^f ^h ^l ^bc ^de ^hl
ix ixh ixl iy iyh iyl
i r sp
</pre></div>
</div>
<p>The names that begin with <code class="docutils literal notranslate"><span class="pre">^</span></code> denote the shadow registers.</p>
<p>The current timestamp (<code class="docutils literal notranslate"><span class="pre">t</span></code>) is the number of T-states that have elapsed since
the start of the simulation, according to the simulator’s internal clock. In
order to maintain synchronisation with the tape being loaded, the simulator’s
clock is adjusted to match the timestamp of the first pulse in each block (as
shown by the <code class="docutils literal notranslate"><span class="pre">--tape-analysis</span></code> option) when that block is reached. (The
simulator’s clock may at times become desynchronised with the tape because, by
default, the tape is paused between blocks, and resumed when port 254 is read.)</p>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[tap2sna]</span></code> section. For example,
to make <cite>tap2sna.py</cite> write instruction addresses and operands in a trace log
file in decimal format by default, add the following section to
<cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[tap2sna]
TraceLine={pc:05} {i}
TraceOperand=
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.6</p></td>
<td><p>Added the ability to load from two tape files; added the
<code class="docutils literal notranslate"><span class="pre">--press</span></code> and <code class="docutils literal notranslate"><span class="pre">--tape-skip</span></code> options; added support to the
<code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">patch</span></code> operation; changed the default
value of the <code class="docutils literal notranslate"><span class="pre">accelerate-dec-a</span></code> simulated LOAD configuration
parameter from <code class="docutils literal notranslate"><span class="pre">1</span></code> to <code class="docutils literal notranslate"><span class="pre">3</span></code>; added the <code class="docutils literal notranslate"><span class="pre">activision</span></code>,
<code class="docutils literal notranslate"><span class="pre">alternative3</span></code>, <code class="docutils literal notranslate"><span class="pre">audiogenic-0</span></code>, <code class="docutils literal notranslate"><span class="pre">audiogenic-1</span></code>,
<code class="docutils literal notranslate"><span class="pre">codemasters</span></code>, <code class="docutils literal notranslate"><span class="pre">diver</span></code>, <code class="docutils literal notranslate"><span class="pre">gremlin2-0</span></code>, <code class="docutils literal notranslate"><span class="pre">gremlin2-1</span></code>,
<code class="docutils literal notranslate"><span class="pre">kwc-0</span></code>, <code class="docutils literal notranslate"><span class="pre">kwc-1</span></code>, <code class="docutils literal notranslate"><span class="pre">mirrorsoft2</span></code> and <code class="docutils literal notranslate"><span class="pre">operasoft</span></code>
tape-sampling loop accelerators; removed the <code class="docutils literal notranslate"><span class="pre">dinaload</span></code>,
<code class="docutils literal notranslate"><span class="pre">gremlin2</span></code>, <code class="docutils literal notranslate"><span class="pre">housenka</span></code>, <code class="docutils literal notranslate"><span class="pre">suzy-soft</span></code> and <code class="docutils literal notranslate"><span class="pre">suzy-soft2</span></code>
tape-sampling loop accelerators</p></td>
</tr>
<tr class="row-odd"><td><p>9.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">UserAgent</span></code> configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>9.3</p></td>
<td><p>Added support for PZX files; added support for the <code class="docutils literal notranslate"><span class="pre">m</span></code> (memory)
replacement field in the <code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>9.2</p></td>
<td><p>Added support for TZX block type 0x15 (direct recording); added
the <code class="docutils literal notranslate"><span class="pre">python</span></code> simulated LOAD configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>9.1</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">move</span></code> and <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">poke</span></code> options can modify specific
RAM banks; added the <code class="docutils literal notranslate"><span class="pre">cmio</span></code> simulated LOAD configuration
parameter</p></td>
</tr>
<tr class="row-odd"><td><p>9.0</p></td>
<td><p>A simulated LOAD is performed by default; an existing snapshot
will be overwritten by default; added the <code class="docutils literal notranslate"><span class="pre">load</span></code>, <code class="docutils literal notranslate"><span class="pre">machine</span></code>,
<code class="docutils literal notranslate"><span class="pre">polarity</span></code> and <code class="docutils literal notranslate"><span class="pre">in-flags</span></code> simulated LOAD configuration
parameters; the output snapshot argument is optional; added
support for writing SZX snapshots; added the
<code class="docutils literal notranslate"><span class="pre">DefaultSnapshotFormat</span></code> configuration parameter; added the
<code class="docutils literal notranslate"><span class="pre">fe</span></code> hardware state attribute; added support for register pairs
(<code class="docutils literal notranslate"><span class="pre">r[bc]</span></code>, <code class="docutils literal notranslate"><span class="pre">r[de]</span></code> etc.) in the <code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> configuration
parameter; added the <code class="docutils literal notranslate"><span class="pre">antirom</span></code>, <code class="docutils literal notranslate"><span class="pre">ernieware</span></code> and <code class="docutils literal notranslate"><span class="pre">housenka</span></code>
tape-sampling loop accelerators; shows ‘DEC A’ delay loop
statistics when <code class="docutils literal notranslate"><span class="pre">accelerator=list</span></code></p></td>
</tr>
<tr class="row-even"><td><p>8.10</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> and <code class="docutils literal notranslate"><span class="pre">--tape-analysis</span></code> options;
added the <code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> and <code class="docutils literal notranslate"><span class="pre">TraceOperand</span></code> configuration
parameters; added the <code class="docutils literal notranslate"><span class="pre">accelerate-dec-a</span></code> and <code class="docutils literal notranslate"><span class="pre">finish-tape</span></code>
simulated LOAD configuration parameters; added the <code class="docutils literal notranslate"><span class="pre">issue2</span></code>
hardware state attribute; added the special <code class="docutils literal notranslate"><span class="pre">auto</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span></code>
tape-sampling loop accelerator names, and the ability to specify
multiple accelerators; added the <code class="docutils literal notranslate"><span class="pre">alkatraz-05</span></code>,
<code class="docutils literal notranslate"><span class="pre">alkatraz-09</span></code>, <code class="docutils literal notranslate"><span class="pre">alkatraz-0a</span></code>, <code class="docutils literal notranslate"><span class="pre">alkatraz-0b</span></code>,
<code class="docutils literal notranslate"><span class="pre">alternative</span></code>, <code class="docutils literal notranslate"><span class="pre">alternative2</span></code>, <code class="docutils literal notranslate"><span class="pre">boguslaw-juza</span></code>,
<code class="docutils literal notranslate"><span class="pre">bulldog</span></code>, <code class="docutils literal notranslate"><span class="pre">crl</span></code>, <code class="docutils literal notranslate"><span class="pre">crl2</span></code>, <code class="docutils literal notranslate"><span class="pre">crl3</span></code>, <code class="docutils literal notranslate"><span class="pre">crl4</span></code>, <code class="docutils literal notranslate"><span class="pre">cybexlab</span></code>,
<code class="docutils literal notranslate"><span class="pre">d-and-h</span></code>, <code class="docutils literal notranslate"><span class="pre">delphine</span></code>, <code class="docutils literal notranslate"><span class="pre">design-design</span></code>, <code class="docutils literal notranslate"><span class="pre">gargoyle2</span></code>,
<code class="docutils literal notranslate"><span class="pre">gremlin2</span></code>, <code class="docutils literal notranslate"><span class="pre">microprose</span></code>, <code class="docutils literal notranslate"><span class="pre">micro-style</span></code>, <code class="docutils literal notranslate"><span class="pre">mirrorsoft</span></code>,
<code class="docutils literal notranslate"><span class="pre">palas</span></code>, <code class="docutils literal notranslate"><span class="pre">raxoft</span></code>, <code class="docutils literal notranslate"><span class="pre">realtime</span></code>, <code class="docutils literal notranslate"><span class="pre">silverbird</span></code>,
<code class="docutils literal notranslate"><span class="pre">software-projects</span></code>, <code class="docutils literal notranslate"><span class="pre">sparklers</span></code>, <code class="docutils literal notranslate"><span class="pre">suzy-soft</span></code>,
<code class="docutils literal notranslate"><span class="pre">suzy-soft2</span></code>, <code class="docutils literal notranslate"><span class="pre">tiny</span></code>, <code class="docutils literal notranslate"><span class="pre">us-gold</span></code> and <code class="docutils literal notranslate"><span class="pre">weird-science</span></code>
tape-sampling loop accelerators</p></td>
</tr>
<tr class="row-odd"><td><p>8.9</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--sim-load-config</span></code>, <code class="docutils literal notranslate"><span class="pre">--tape-name</span></code>,
<code class="docutils literal notranslate"><span class="pre">--tape-start</span></code>, <code class="docutils literal notranslate"><span class="pre">--tape-stop</span></code> and <code class="docutils literal notranslate"><span class="pre">--tape-sum</span></code> options;
added support for TZX loops, pauses, and unused bits in data
blocks; added support for quoted arguments in an arguments file;
added the <code class="docutils literal notranslate"><span class="pre">tstates</span></code> hardware state attribute</p></td>
</tr>
<tr class="row-even"><td><p>8.8</p></td>
<td><p>A simulated LOAD performs any <code class="docutils literal notranslate"><span class="pre">call/move/poke/sysvars</span></code>
operations specified by <code class="docutils literal notranslate"><span class="pre">--ram</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>8.7</p></td>
<td><p>Added support for simulating a 48K Spectrum LOADing a tape; when
a headerless block is ignored because no <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">load</span></code> options
have been specified, a warning is printed</p></td>
</tr>
<tr class="row-even"><td><p>8.6</p></td>
<td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">call</span></code> operation</p></td>
</tr>
<tr class="row-odd"><td><p>8.4</p></td>
<td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">sysvars</span></code>
operation</p></td>
</tr>
<tr class="row-even"><td><p>6.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--user-agent</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--ram</span></code>, <code class="docutils literal notranslate"><span class="pre">--reg</span></code>, <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options
accept hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>5.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>4.5</p></td>
<td><p>Added support for TZX block type 0x14 (pure data), for loading
the first and last bytes of a tape block, and for modifying
memory with XOR and ADD operations</p></td>
</tr>
<tr class="row-even"><td><p>3.5</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tapinfo-py">
<span id="id23"></span><h2>tapinfo.py<a class="headerlink" href="#tapinfo-py" title="Permalink to this heading">¶</a></h2>
<p><cite>tapinfo.py</cite> shows information on the blocks in a PZX, TAP or TZX file. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tapinfo.py game.tzx
</pre></div>
</div>
<p>To list the options supported by <cite>tapinfo.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: tapinfo.py FILE

Show the blocks in a PZX, TAP or TZX file.

Options:
  -b N[,A], --basic N[,A]
                        List the BASIC program in block N loaded at address A
                        (default 23755).
  -d, --data            Show the entire contents of header and data blocks.
  --tape-start BLOCK    Start at this tape block number.
  --tape-stop BLOCK     Stop at this tape block number.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.3</p></td>
<td><p>Added support for PZX files; added the <code class="docutils literal notranslate"><span class="pre">--tape-start</span></code> and
<code class="docutils literal notranslate"><span class="pre">--tape-stop</span></code> options; shows info for TZX block types 0x18 (CSW
recording) and 0x2B (set signal level); recognises deprecated TZX
block types 0x16, 0x17, 0x34 and 0x40</p></td>
</tr>
<tr class="row-odd"><td><p>9.2</p></td>
<td><p>Shows info for TZX block type 0x15 (direct recording)</p></td>
</tr>
<tr class="row-even"><td><p>9.0</p></td>
<td><p>Shows the LINE number (if present) for ‘Program:’ header blocks;
renders BASIC tokens in header block names</p></td>
</tr>
<tr class="row-odd"><td><p>8.9</p></td>
<td><p>Shows full info for TZX block types 0x10 and 0x11</p></td>
</tr>
<tr class="row-even"><td><p>8.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--data</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>8.1</p></td>
<td><p>Shows contents of TZX block types 0x33 (hardware type) and 0x35
(custom info)</p></td>
</tr>
<tr class="row-even"><td><p>7.1</p></td>
<td><p>Shows pulse lengths in TZX block type 0x13 and full info for TZX
block type 0x14</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option accepts a hexadecimal address prefixed by
‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>6.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.0</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
<section id="trace-py">
<span id="id24"></span><h2>trace.py<a class="headerlink" href="#trace-py" title="Permalink to this heading">¶</a></h2>
<p><cite>trace.py</cite> simulates the execution of machine code in a 48K, 128K or +2 memory
snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ trace.py --start 32768 --stop 49152 game.z80
</pre></div>
</div>
<p>To list the options supported by <cite>trace.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: trace.py [options] FILE [OUTFILE...]

Trace Z80 machine code execution. FILE may be a binary (raw memory) file, a
SNA, SZX or Z80 snapshot, or &#39;48&#39;, &#39;128&#39; or &#39;+2&#39; for no snapshot. If &#39;OUTFILE&#39;
is given, an SZX/Z80 snapshot, WAV file or PNG file is written after execution
has completed.

Options:
  --audio               Show audio delays.
  -c, --cmio            Simulate memory and I/O contention.
  --depth DEPTH         Simplify audio delays to this depth (default: 2).
  -D, --decimal         Show decimal values in verbose mode.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  --map FILE            Log addresses of executed instructions to a file.
  -m MAX, --max-operations MAX
                        Maximum number of instructions to execute.
  -M MAX, --max-tstates MAX
                        Maximum number of T-states to run for.
  -n, --no-interrupts   Don&#39;t execute interrupt routines.
  -o ADDR, --org ADDR   Specify the origin address of a binary (raw memory)
                        file (default: 65536 - length).
  -p [p:]a[-b[-c]],[^+]v, --poke [p:]a[-b[-c]],[^+]v
                        POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}
                        before execution begins. Prefix &#39;v&#39; with &#39;^&#39; to
                        perform an XOR operation, or &#39;+&#39; to perform an ADD
                        operation. This option may be used multiple times.
  --python              Use the pure Python Z80 simulator.
  -r name=value, --reg name=value
                        Set the value of a register before execution begins.
                        Do &#39;--reg help&#39; for more information. This option may
                        be used multiple times.
  --rom FILE            Patch in a ROM at address 0 from this file.
  --show-config         Show configuration parameter values.
  -s ADDR, --start ADDR
                        Start execution at this address.
  -S ADDR, --stop ADDR  Stop execution at this address.
  --screen              Display screen contents and respond to keypresses
                        while running.
  --state name=value    Set a hardware state attribute before execution
                        begins. Do &#39;--state help&#39; for more information. This
                        option may be used multiple times.
  --stats               Show stats after execution.
  -v, --verbose         Show executed instructions. Repeat this option to show
                        register values too.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>By default, <cite>trace.py</cite> silently simulates code execution beginning with the
instruction at the address specified by the <code class="docutils literal notranslate"><span class="pre">--start</span></code> option (or the program
counter in the snapshot) and ending when the instruction at the address
specified by <code class="docutils literal notranslate"><span class="pre">--stop</span></code> (if any) is reached. Use the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option to
show each instruction executed. Repeat the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option (<code class="docutils literal notranslate"><span class="pre">-vv</span></code>) to
show register values too.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">--audio</span></code> option is given, <cite>trace.py</cite> tracks changes in the state
of the ZX Spectrum speaker, and then prints a list of the delays (in T-states)
between those changes. This list can be supplied to the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a> macro to
produce a WAV file for the sound effect that would be produced by the same code
running on a real ZX Spectrum.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">--screen</span></code> option is given and <a class="reference external" href="https://pygame.org/">pygame</a> is installed, <cite>trace.py</cite> will
use it to render the Spectrum’s screen contents at 50 frames per second with a
scale factor of 2 while running. The frame rate and scale factor can be changed
by setting the <code class="docutils literal notranslate"><span class="pre">ScreenFps</span></code> and <code class="docutils literal notranslate"><span class="pre">ScreenScale</span></code> configuration parameters.
While the screen is displayed, <cite>trace.py</cite> will also respond to keypresses, with
the left shift key mapped to CAPS SHIFT on the Spectrum keyboard, and the left
Ctrl key mapped to SYMBOL SHIFT.</p>
<section id="trace-conf">
<span id="id25"></span><h3>Configuration<a class="headerlink" href="#trace-conf" title="Permalink to this heading">¶</a></h3>
<p><cite>trace.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PNGScale</span></code> - the PNG image scale factor (default: <code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Screen</span></code> - display screen contents while running (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScreenFps</span></code> - screen refresh rate in frames per second (default: <code class="docutils literal notranslate"><span class="pre">50</span></code>);
if set to 0, <cite>trace.py</cite> runs at maximum speed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScreenScale</span></code> - screen scale factor (default: <code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> - the format of each instruction line when <code class="docutils literal notranslate"><span class="pre">-v</span></code> is used
(default: <code class="docutils literal notranslate"><span class="pre">${pc:04X}</span> <span class="pre">{i}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceLine2</span></code> - the format of each instruction line when <code class="docutils literal notranslate"><span class="pre">-vv</span></code> is used
(use <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> to see the default value)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceLineDecimal</span></code> - the format of each instruction line when <code class="docutils literal notranslate"><span class="pre">-Dv</span></code> is
used (default: <code class="docutils literal notranslate"><span class="pre">{pc:05}</span> <span class="pre">{i}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceLineDecimal2</span></code> - the format of each instruction line when <code class="docutils literal notranslate"><span class="pre">-Dvv</span></code> is
used (use <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> to see the default value)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceOperand</span></code> - the prefix, byte format, and word format for the numeric
operands of instructions, separated by commas (default: <code class="docutils literal notranslate"><span class="pre">$,02X,04X</span></code>); the
byte and word formats are standard Python format specifiers for numeric
values, and default to empty strings if not supplied</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceOperandDecimal</span></code> - as <code class="docutils literal notranslate"><span class="pre">TraceOperand</span></code> when <code class="docutils literal notranslate"><span class="pre">-D</span></code> is used (default:
<code class="docutils literal notranslate"><span class="pre">,,</span></code>)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">TraceLine*</span></code> parameters are standard Python format strings that recognise
the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> - the current instruction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m[address]</span></code> - the contents of a memory address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pc</span></code> - the address of the current instruction (program counter)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r[X]</span></code> - the ‘X’ register (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code> - the current timestamp (in T-states)</p></li>
</ul>
<p>When using the <code class="docutils literal notranslate"><span class="pre">m</span></code> (memory) replacement field, <code class="docutils literal notranslate"><span class="pre">address</span></code> must be either a
decimal number, or a hexadecimal number prefixed by ‘$’ or ‘0x’.</p>
<p>The register name <code class="docutils literal notranslate"><span class="pre">X</span></code> in <code class="docutils literal notranslate"><span class="pre">r[X]</span></code> must be one of the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a b c d e f h l bc de hl
^a ^b ^c ^d ^e ^f ^h ^l ^bc ^de ^hl
ix ixh ixl iy iyh iyl
i r sp
</pre></div>
</div>
<p>The names that begin with <code class="docutils literal notranslate"><span class="pre">^</span></code> denote the shadow registers.</p>
<p>Wherever <code class="docutils literal notranslate"><span class="pre">\n</span></code> appears in a <code class="docutils literal notranslate"><span class="pre">TraceLine*</span></code> parameter value, it is replaced by
a newline character.</p>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[trace]</span></code> section. For example,
to make <cite>trace.py</cite> write a timestamp for each instruction when <code class="docutils literal notranslate"><span class="pre">-v</span></code> is used,
add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[trace]
TraceLine={t:&gt;10} ${pc:04X} {i}
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>9.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Screen</span></code> configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>9.5</p></td>
<td><p>Responds to keypresses while the screen is displayed; added the
<code class="docutils literal notranslate"><span class="pre">--map</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>9.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--screen</span></code> option; added support for writing a PNG
file after execution has completed; added the <code class="docutils literal notranslate"><span class="pre">PNGScale</span></code>,
<code class="docutils literal notranslate"><span class="pre">ScreenFps</span></code> and <code class="docutils literal notranslate"><span class="pre">ScreenScale</span></code> configuration parameters; added
support for multiple output file arguments</p></td>
</tr>
<tr class="row-odd"><td><p>9.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--state</span></code> option; added support for writing a WAV
file after execution has completed; added support for the <code class="docutils literal notranslate"><span class="pre">m</span></code>
(memory) replacement field in the <code class="docutils literal notranslate"><span class="pre">TraceLine*</span></code> configuration
parameters</p></td>
</tr>
<tr class="row-even"><td><p>9.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--python</span></code> option; added support for +2 snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>9.1</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--poke</span></code> option can modify specific RAM banks; added the
<code class="docutils literal notranslate"><span class="pre">--cmio</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>9.0</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-interrupts</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options;
interrupt routines are executed by default; added support for
128K snapshots; added support for writing SZX snapshots; added
the <code class="docutils literal notranslate"><span class="pre">-m</span></code> and <code class="docutils literal notranslate"><span class="pre">-M</span></code> short options</p></td>
</tr>
<tr class="row-odd"><td><p>8.9</p></td>
<td><p>Reads and writes the T-states counter in Z80 snapshots and reads
the T-states counter in SZX snapshots</p></td>
</tr>
<tr class="row-even"><td><p>8.8</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Commands</a><ul>
<li><a class="reference internal" href="#bin2sna-py">bin2sna.py</a></li>
<li><a class="reference internal" href="#bin2tap-py">bin2tap.py</a></li>
<li><a class="reference internal" href="#rzxinfo-py">rzxinfo.py</a></li>
<li><a class="reference internal" href="#rzxplay-py">rzxplay.py</a></li>
<li><a class="reference internal" href="#skool2asm-py">skool2asm.py</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#skool2bin-py">skool2bin.py</a><ul>
<li><a class="reference internal" href="#skool2bin-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#skool2ctl-py">skool2ctl.py</a><ul>
<li><a class="reference internal" href="#skool2ctl-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#skool2html-py">skool2html.py</a><ul>
<li><a class="reference internal" href="#skool2html-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sna2ctl-py">sna2ctl.py</a><ul>
<li><a class="reference internal" href="#sna2ctl-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sna2img-py">sna2img.py</a></li>
<li><a class="reference internal" href="#sna2skool-py">sna2skool.py</a><ul>
<li><a class="reference internal" href="#sna2skool-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#snapinfo-py">snapinfo.py</a><ul>
<li><a class="reference internal" href="#call-graphs">Call graphs</a></li>
<li><a class="reference internal" href="#snapinfo-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#snapmod-py">snapmod.py</a></li>
<li><a class="reference internal" href="#tap2sna-py">tap2sna.py</a><ul>
<li><a class="reference internal" href="#simulated-load">Simulated LOAD</a></li>
<li><a class="reference internal" href="#accelerators">Accelerators</a></li>
<li><a class="reference internal" href="#load-command">LOAD command</a></li>
<li><a class="reference internal" href="#user-input">User input</a></li>
<li><a class="reference internal" href="#tap2sna-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tapinfo-py">tapinfo.py</a></li>
<li><a class="reference internal" href="#trace-py">trace.py</a><ul>
<li><a class="reference internal" href="#trace-conf">Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="diy.html"
                          title="previous chapter">Disassembly DIY</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="assemblers.html"
                          title="next chapter">Supported assemblers</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/commands.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="assemblers.html" title="Supported assemblers"
             >next</a> |</li>
        <li class="right" >
          <a href="diy.html" title="Disassembly DIY"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.6 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Commands</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, Richard Dymond.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>