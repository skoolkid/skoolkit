
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Commands &#8212; SkoolKit 8.7 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supported assemblers" href="assemblers.html" />
    <link rel="prev" title="Disassembly DIY" href="diy.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="assemblers.html" title="Supported assemblers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="diy.html" title="Disassembly DIY"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 8.7 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Commands</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="commands">
<span id="id1"></span><h1>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h1>
<div class="section" id="bin2sna-py">
<span id="id2"></span><h2>bin2sna.py<a class="headerlink" href="#bin2sna-py" title="Permalink to this headline">¶</a></h2>
<p><cite>bin2sna.py</cite> converts a binary (raw memory) file into a Z80 snapshot. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ bin2sna.py game.bin
</pre></div>
</div>
<p>will create a file named <cite>game.z80</cite>. By default, the origin address (the
address of the first byte of code or data), the start address (the first byte
of code to run) and the stack pointer are set to 65536 minus the length of
<cite>game.bin</cite>. These values can be changed by passing options to <cite>bin2sna.py</cite>. Run
it with no arguments to see the list of available options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: bin2sna.py [options] file.bin [file.z80]

Convert a binary (raw memory) file into a Z80 snapshot. &#39;file.bin&#39; may be a
regular file, or &#39;-&#39; for standard input. If &#39;file.z80&#39; is not given, it
defaults to the name of the input file with &#39;.bin&#39; replaced by &#39;.z80&#39;, or
&#39;program.z80&#39; if reading from standard input.

Options:
  -b BORDER, --border BORDER
                        Set the border colour (default: 7).
  -o ORG, --org ORG     Set the origin address (default: 65536 minus the
                        length of file.bin).
  -p STACK, --stack STACK
                        Set the stack pointer (default: ORG).
  -P a[-b[-c]],[^+]v, --poke a[-b[-c]],[^+]v
                        POKE N,v for N in {a, a+c, a+2c..., b}. Prefix &#39;v&#39;
                        with &#39;^&#39; to perform an XOR operation, or &#39;+&#39; to
                        perform an ADD operation. This option may be used
                        multiple times.
  -r name=value, --reg name=value
                        Set the value of a register. Do &#39;--reg help&#39; for more
                        information. This option may be used multiple times.
  -s START, --start START
                        Set the address at which to start execution (default:
                        ORG).
  -S name=value, --state name=value
                        Set a hardware state attribute. Do &#39;--state help&#39; for
                        more information. This option may be used multiple
                        times.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>6.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--poke</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--reg</span></code> and <code class="docutils literal notranslate"><span class="pre">--state</span></code> options; the <code class="docutils literal notranslate"><span class="pre">--org</span></code>,
<code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal integer
prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>5.2</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="bin2tap-py">
<span id="id3"></span><h2>bin2tap.py<a class="headerlink" href="#bin2tap-py" title="Permalink to this headline">¶</a></h2>
<p><cite>bin2tap.py</cite> converts a binary (raw memory) file or a SNA, SZX or Z80 snapshot
into a TAP file. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ bin2tap.py game.bin
</pre></div>
</div>
<p>will create a file called <cite>game.tap</cite>. By default, the origin address (the
address of the first byte of code or data), the start address (the first byte
of code to run) and the stack pointer are set to 65536 minus the length of
<cite>game.bin</cite>. These values can be changed by passing options to <cite>bin2tap.py</cite>. Run
it with no arguments to see the list of available options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: bin2tap.py [options] FILE [file.tap]

Convert a binary (raw memory) file or a SNA, SZX or Z80 snapshot into a TAP
file. FILE may be a regular file, or &#39;-&#39; to read a binary file from standard
input.

Options:
  -b BEGIN, --begin BEGIN
                        Begin conversion at this address (default: ORG for a
                        binary file, 16384 for a snapshot).
  -c N, --clear N       Use a &#39;CLEAR N&#39; command in the BASIC loader and leave
                        the stack pointer alone.
  -e END, --end END     End conversion at this address.
  -o ORG, --org ORG     Set the origin address for a binary file (default:
                        65536 minus the length of FILE).
  -p STACK, --stack STACK
                        Set the stack pointer (default: BEGIN).
  -s START, --start START
                        Set the start address to JP to (default: BEGIN).
  -S FILE, --screen FILE
                        Add a loading screen to the TAP file. FILE may be a
                        snapshot or a 6912-byte SCR file.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>Note that the ROM tape loading routine at 1366 (0x0556) and the load routine
used by <cite>bin2tap.py</cite> together require 14 bytes for stack operations, and so
STACK must be at least 16384+14=16398 (0x400E). This means that if ORG is less
than 16398, you should use the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option to set the stack pointer to
something appropriate. If the main data block (derived from <cite>game.bin</cite>)
overlaps any of the last four bytes of the stack, <cite>bin2tap.py</cite> will replace
those bytes with the values required by the tape loading routine for correct
operation upon returning. Stack operations will overwrite the bytes in the
address range STACK-14 to STACK-1 inclusive, so those addresses should not be
used to store essential code or data.</p>
<p>If the input file contains a program that returns to BASIC, you should use the
<code class="docutils literal notranslate"><span class="pre">--clear</span></code> option to add a CLEAR command to the BASIC loader. This option
leaves the stack pointer alone, enabling the program to return to BASIC without
crashing. The lowest usable address with the <code class="docutils literal notranslate"><span class="pre">--clear</span></code> option on a bare 48K
Spectrum is 23952 (0x5D90).</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--begin</span></code> option; the <code class="docutils literal notranslate"><span class="pre">--end</span></code> option applies to raw
memory files as well as snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--clear</span></code>, <code class="docutils literal notranslate"><span class="pre">--end</span></code>, <code class="docutils literal notranslate"><span class="pre">--org</span></code>, <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and
<code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>5.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--screen</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.2</p></td>
<td><p>Added the ability to read a binary file from standard input;
added a second positional argument specifying the TAP filename</p></td>
</tr>
<tr class="row-even"><td><p>4.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--clear</span></code> and <code class="docutils literal notranslate"><span class="pre">--end</span></code> options, and the ability to
convert SNA, SZX and Z80 snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option and the long options</p></td>
</tr>
<tr class="row-even"><td><p>2.2.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>1.3.1</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="skool2asm-py">
<span id="id4"></span><h2>skool2asm.py<a class="headerlink" href="#skool2asm-py" title="Permalink to this headline">¶</a></h2>
<p><cite>skool2asm.py</cite> converts a skool file into an ASM file that can be fed to an
assembler (see <a class="reference internal" href="assemblers.html#supportedassemblers"><span class="std std-ref">Supported assemblers</span></a>). For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2asm.py game.skool &gt; game.asm
</pre></div>
</div>
<p><cite>skool2asm.py</cite> supports many options; run it with no arguments to see a list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2asm.py [options] FILE

Convert a skool file into an ASM file and write it to standard output. FILE may
be a regular file, or &#39;-&#39; for standard input.

Options:
  -c, --create-labels   Create default labels for unlabelled instructions.
  -D, --decimal         Write the disassembly in decimal.
  -E ADDR, --end ADDR   Stop converting at this address.
  -f N, --fixes N       Apply fixes:
                          N=0: None (default)
                          N=1: @ofix only
                          N=2: @ofix and @bfix
                          N=3: @ofix, @bfix and @rfix (implies -r)
  -F, --force           Force conversion, ignoring @start and @end directives.
  -H, --hex             Write the disassembly in hexadecimal.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -l, --lower           Write the disassembly in lower case.
  -p, --package-dir     Show path to skoolkit package directory and exit.
  -P p=v, --set p=v     Set the value of ASM writer property &#39;p&#39; to &#39;v&#39;. This
                        option may be used multiple times.
  -q, --quiet           Be quiet.
  -r, --rsub            Apply safe substitutions (@ssub) and relocatability
                        substitutions (@rsub) (implies &#39;-f 1&#39;).
  --show-config         Show configuration parameter values.
  -s, --ssub            Apply safe substitutions (@ssub).
  -S ADDR, --start ADDR
                        Start converting at this address.
  -u, --upper           Write the disassembly in upper case.
  --var name=value      Define a variable that can be used by @if and the SMPL
                        macros. This option may be used multiple times.
  -V, --version         Show SkoolKit version number and exit.
  -w, --no-warnings     Suppress warnings.
  -W CLASS, --writer CLASS
                        Specify the ASM writer class to use.
</pre></div>
</div>
<p>See <a class="reference internal" href="asm.html#asmmodesanddirectives"><span class="std std-ref">ASM modes and directives</span></a> for a description of the <code class="docutils literal notranslate"><span class="pre">&#64;ssub</span></code> and
<code class="docutils literal notranslate"><span class="pre">&#64;rsub</span></code> substitution modes, and the <code class="docutils literal notranslate"><span class="pre">&#64;ofix</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;bfix</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;rfix</span></code> bugfix
modes.</p>
<p>See the <a class="reference internal" href="asm.html#set"><span class="std std-ref">&#64;set</span></a> directive for information on the ASM writer properties that
can be set by the <code class="docutils literal notranslate"><span class="pre">--set</span></code> option.</p>
<div class="section" id="configuration">
<span id="skool2asm-conf"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p><cite>skool2asm.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Address</span></code> - the format of the default link text for the <a class="reference internal" href="skool-macros.html#r"><span class="std std-ref">#R</span></a> macro when
the target address has no label (default: ‘’); this format string recognises
the replacement field <code class="docutils literal notranslate"><span class="pre">address</span></code>; if the format string is blank, the address
is formatted exactly as it appears in the skool file (without any <code class="docutils literal notranslate"><span class="pre">$</span></code>
prefix)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - convert addresses and instruction operands to hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>), or leave them as they are (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>),
or leave it as it is (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CreateLabels</span></code> - create default labels for unlabelled instructions (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> - the format of the default label for the first instruction in
a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">L{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> - the format of the default label for an instruction
other than the first in a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">{main}_{index}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Quiet</span></code> - be quiet (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or verbose (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Set-property</span></code> - set an ASM writer property value, e.g. <code class="docutils literal notranslate"><span class="pre">Set-bullet=+</span></code>
(see the <a class="reference internal" href="asm.html#set"><span class="std std-ref">&#64;set</span></a> directive for a list of available properties)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Templates</span></code> - file from which to read custom <a class="reference internal" href="asm-templates.html#asmtemplates"><span class="std std-ref">ASM templates</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Warnings</span></code> - show warnings (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or suppress them (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> are standard Python format strings.
<code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the routine or data block as it appears in the
skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the routine or data block as an integer</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the instruction as it appears in the skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - 0 for the first unlabelled instruction in the routine or data
block, 1 for the second, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the instruction as an integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> - the label of the first instruction in the routine or data block</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2asm]</span></code> section. For example,
to make <cite>skool2asm.py</cite> write the disassembly in hexadecimal with a line width
of 120 characters by default (without having to use the <code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-P</span></code>
options on the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2asm]
Base=16
Set-line-width=120
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Address</span></code>, <code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code>
configuration parameters</p></td>
</tr>
<tr class="row-odd"><td><p>7.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Templates</span></code> configuration parameter and support for
<a class="reference internal" href="asm-templates.html#asmtemplates"><span class="std std-ref">ASM templates</span></a></p></td>
</tr>
<tr class="row-even"><td><p>7.0</p></td>
<td><p><a class="reference internal" href="skool-files.html#nonentryblocks"><span class="std std-ref">Non-entry blocks</span></a> are reproduced verbatim; added the
<code class="docutils literal notranslate"><span class="pre">--force</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--var</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> option; the <code class="docutils literal notranslate"><span class="pre">--end</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code>
options accept a hexadecimal integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>5.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--set</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>4.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--start</span></code> and <code class="docutils literal notranslate"><span class="pre">--end</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>4.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--writer</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> and <code class="docutils literal notranslate"><span class="pre">-p</span></code> options and the long options</p></td>
</tr>
<tr class="row-even"><td><p>2.2.2</p></td>
<td><p>Added the ability to read a skool file from standard input</p></td>
</tr>
<tr class="row-odd"><td><p>2.1.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-u</span></code>, <code class="docutils literal notranslate"><span class="pre">-D</span></code> and <code class="docutils literal notranslate"><span class="pre">-H</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>1.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="skool2bin-py">
<span id="id5"></span><h2>skool2bin.py<a class="headerlink" href="#skool2bin-py" title="Permalink to this headline">¶</a></h2>
<p><cite>skool2bin.py</cite> converts a skool file into a binary (raw memory) file. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2bin.py game.skool
</pre></div>
</div>
<p>To list the options supported by <cite>skool2bin.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2bin.py [options] file.skool [file.bin]

Convert a skool file into a binary (raw memory) file. &#39;file.skool&#39; may be a
regular file, or &#39;-&#39; for standard input. If &#39;file.bin&#39; is not given, it
defaults to the name of the input file with &#39;.skool&#39; replaced by &#39;.bin&#39;.
&#39;file.bin&#39; may be a regular file, or &#39;-&#39; for standard output.

Options:
  -b, --bfix            Apply @ofix and @bfix directives.
  -d, --data            Process @defb, @defs and @defw directives.
  -E ADDR, --end ADDR   Stop converting at this address.
  -i, --isub            Apply @isub directives.
  -o, --ofix            Apply @ofix directives.
  -r, --rsub            Apply @isub, @ssub and @rsub directives (implies
                        --ofix).
  -R, --rfix            Apply @ofix, @bfix and @rfix directives (implies
                        --rsub).
  -s, --ssub            Apply @isub and @ssub directives.
  -S ADDR, --start ADDR
                        Start converting at this address.
  -v, --verbose         Show info on each converted instruction.
  -V, --version         Show SkoolKit version number and exit.
  -w, --no-warnings     Suppress warnings.
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option shows information on each converted instruction, such
as whether it was inserted before or after another instruction (by a <code class="docutils literal notranslate"><span class="pre">&#64;*sub</span></code>
or <code class="docutils literal notranslate"><span class="pre">&#64;*fix</span></code> directive), and its original address (if it was relocated by the
insertion, removal or replacement of other instructions). For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>40000 9C40 &gt; XOR A
40001 9C41 | LD HL,40006   : 40000 9C40 LD HL,40003
40004 9C44 + JR 40006      :            JR 40003
40006 9C46   RET           : 40003 9C43 RET
</pre></div>
</div>
<p>This output shows that:</p>
<ul class="simple">
<li><p>The instruction at 40000 (XOR A) was inserted before (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>) another
instruction</p></li>
<li><p>The instruction at 40001 (LD HL,40006) overwrote (<code class="docutils literal notranslate"><span class="pre">|</span></code>) the instruction(s)
originally at 40000, and had its operand changed from 40003 (because the
instruction originally at that address was relocated to 40006)</p></li>
<li><p>The instruction at 40004 (JR 40006) was inserted after (<code class="docutils literal notranslate"><span class="pre">+</span></code>) another
instruction, and also had its operand changed from 40003</p></li>
<li><p>The instruction at 40006 (RET) was originally at 40003 (before other
instructions were inserted, removed or replaced)</p></li>
</ul>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--data</span></code>, <code class="docutils literal notranslate"><span class="pre">--rsub</span></code>, <code class="docutils literal notranslate"><span class="pre">--rfix</span></code>, <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> and
<code class="docutils literal notranslate"><span class="pre">--no-warnings</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>7.0</p></td>
<td><p><a class="reference internal" href="asm.html#asm-if"><span class="std std-ref">&#64;if</span></a> directives are processed</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--end</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal
integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Added the ability to assemble instructions whose operands contain
arithmetic expressions</p></td>
</tr>
<tr class="row-even"><td><p>5.2</p></td>
<td><p>Added the ability to write the binary file to standard output</p></td>
</tr>
<tr class="row-odd"><td><p>5.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--bfix</span></code>, <code class="docutils literal notranslate"><span class="pre">--ofix</span></code> and <code class="docutils literal notranslate"><span class="pre">--ssub</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>5.0</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="skool2ctl-py">
<span id="id6"></span><h2>skool2ctl.py<a class="headerlink" href="#skool2ctl-py" title="Permalink to this headline">¶</a></h2>
<p><cite>skool2ctl.py</cite> converts a skool file into a <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control file</span></a>.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2ctl.py game.skool &gt; game.ctl
</pre></div>
</div>
<p>In addition to block types and addresses, <cite>game.ctl</cite> will contain block titles,
block descriptions, registers, mid-block comments, block start and end
comments, sub-block types and addresses, instruction-level comments, non-entry
blocks, and some <a class="reference internal" href="asm.html#asmdirectives"><span class="std std-ref">ASM directives</span></a>.</p>
<p>To list the options supported by <cite>skool2ctl.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2ctl.py [options] FILE

Convert a skool file into a control file and write it to standard output. FILE
may be a regular file, or &#39;-&#39; for standard input.

Options:
  -b, --preserve-base   Preserve the base of decimal and hexadecimal values in
                        instruction operands and DEFB/DEFM/DEFS/DEFW statements.
  -E ADDR, --end ADDR   Stop converting at this address.
  -h, --hex             Write addresses in upper case hexadecimal format.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -k, --keep-lines      Preserve line breaks in comments.
  -l, --hex-lower       Write addresses in lower case hexadecimal format.
  --show-config         Show configuration parameter values.
  -S ADDR, --start ADDR
                        Start converting at this address.
  -V, --version         Show SkoolKit version number and exit.
  -w X, --write X       Write only these elements, where X is one or more of:
                          a = ASM directives
                          b = block types and addresses
                          t = block titles
                          d = block descriptions
                          r = registers
                          m = mid-block comments and block start/end comments
                          s = sub-block types and addresses
                          c = instruction-level comments
                          n = non-entry blocks
</pre></div>
</div>
<div class="section" id="skool2ctl-conf">
<span id="id7"></span><h3>Configuration<a class="headerlink" href="#skool2ctl-conf" title="Permalink to this headline">¶</a></h3>
<p><cite>skool2ctl.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Hex</span></code> - write addresses in decimal (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default), lower case
hexadecimal (<code class="docutils literal notranslate"><span class="pre">1</span></code>),  or upper case hexadecimal (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KeepLines</span></code> - preserve line breaks in comments (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PreserveBase</span></code> - preserve the base of decimal and hexadecimal values in
instruction operands and DEFB/DEFM/DEFS/DEFW statements (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t
(<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2ctl]</span></code> section. For
example, to make <cite>skool2ctl.py</cite> write upper case hexadecimal addresses by
default (without having to use the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option on the command line), add the
following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2ctl]
Hex=2
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7.2</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> and <code class="docutils literal notranslate"><span class="pre">--keep-lines</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>7.0</p></td>
<td><p>Added support for the ‘n’ identifier in the <code class="docutils literal notranslate"><span class="pre">--write</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--end</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal
integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.0</p></td>
<td><p>Added support for the ‘a’ identifier in the <code class="docutils literal notranslate"><span class="pre">--write</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>5.1</p></td>
<td><p>A terminal <code class="docutils literal notranslate"><span class="pre">i</span></code> directive is appended if the skool file ends
before 65536</p></td>
</tr>
<tr class="row-odd"><td><p>4.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--start</span></code> and <code class="docutils literal notranslate"><span class="pre">--end</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>4.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--hex-lower</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>3.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--preserve-base</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option and the long options</p></td>
</tr>
<tr class="row-odd"><td><p>2.4</p></td>
<td><p>Added the ability to preserve some ASM directives</p></td>
</tr>
<tr class="row-even"><td><p>2.2.2</p></td>
<td><p>Added the ability to read a skool file from standard input</p></td>
</tr>
<tr class="row-odd"><td><p>2.0.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>1.1</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="skool2html-py">
<span id="id8"></span><h2>skool2html.py<a class="headerlink" href="#skool2html-py" title="Permalink to this headline">¶</a></h2>
<p><cite>skool2html.py</cite> converts a skool file (and its associated ref files, if any
exist) into a browsable disassembly in HTML format.</p>
<p>For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2html.py game.skool
</pre></div>
</div>
<p>will convert the file <cite>game.skool</cite> into a bunch of HTML files. If any files
named <cite>game*.ref</cite> (e.g. <cite>game.ref</cite>, <cite>game-bugs.ref</cite>, <cite>game-pokes.ref</cite> and so
on) also exist in the same directory as <cite>game.skool</cite>, they will be used to
provide further information to the conversion process, along with any extra
files named in the <code class="docutils literal notranslate"><span class="pre">RefFiles</span></code> parameter in the <a class="reference internal" href="ref-files.html#ref-config"><span class="std std-ref">[Config]</span></a> section, and
any other ref files named on the command line.</p>
<p><cite>skool2html.py</cite> supports several options; run it with no arguments to see a
list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2html.py [options] SKOOLFILE [REFFILE...]

Convert a skool file and ref files to HTML. SKOOLFILE may be a regular file, or
&#39;-&#39; for standard input.

Options:
  -1, --asm-one-page    Write all routines and data blocks to a single page.
  -a, --asm-labels      Use ASM labels.
  -c S/L, --config S/L  Add the line &#39;L&#39; to the ref file section &#39;S&#39;. This
                        option may be used multiple times.
  -C, --create-labels   Create default labels for unlabelled instructions.
  -d DIR, --output-dir DIR
                        Write files in this directory (default is &#39;.&#39;).
  -D, --decimal         Write the disassembly in decimal.
  -H, --hex             Write the disassembly in hexadecimal.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -j NAME, --join-css NAME
                        Concatenate CSS files into a single file with this name.
  -l, --lower           Write the disassembly in lower case.
  -o, --rebuild-images  Overwrite existing image files.
  -O, --rebuild-audio   Overwrite existing audio files.
  -p, --package-dir     Show path to skoolkit package directory and exit.
  -P PAGES, --pages PAGES
                        Write only these pages (when using &#39;--write P&#39;).
                        PAGES is a comma-separated list of page IDs.
  -q, --quiet           Be quiet.
  -r PREFIX, --ref-sections PREFIX
                        Show default ref file sections whose names start with
                        PREFIX and exit.
  -R, --ref-file        Show the entire default ref file and exit.
  -s, --search-dirs     Show the locations skool2html.py searches for resources.
  -S DIR, --search DIR  Add this directory to the resource search path. This
                        option may be used multiple times.
  --show-config         Show configuration parameter values.
  -t, --time            Show timings.
  -T THEME, --theme THEME
                        Use this CSS theme. This option may be used multiple
                        times.
  -u, --upper           Write the disassembly in upper case.
  --var name=value      Define a variable that can be used by @if and the SMPL
                        macros. This option may be used multiple times.
  -V, --version         Show SkoolKit version number and exit.
  -w X, --write X       Write only these files, where X is one or more of:
                          d = Disassembly files   o = Other code
                          i = Disassembly index   P = Other pages
                          m = Memory maps
  -W CLASS, --writer CLASS
                        Specify the HTML writer class to use; shorthand for
                        &#39;--config Config/HtmlWriterClass=CLASS&#39;.
</pre></div>
</div>
<p><cite>skool2html.py</cite> searches the following directories for CSS files, JavaScript
files, font files, and files listed in the <a class="reference internal" href="ref-files.html#resources"><span class="std std-ref">[Resources]</span></a> section of the ref
file:</p>
<ul class="simple">
<li><p>The directory that contains the skool file named on the command line</p></li>
<li><p>The current working directory</p></li>
<li><p><cite>./resources</cite></p></li>
<li><p><cite>~/.skoolkit</cite></p></li>
<li><p><cite>$PACKAGE_DIR/resources</cite></p></li>
<li><p>Any other directories specified by the <code class="docutils literal notranslate"><span class="pre">-S</span></code>/<code class="docutils literal notranslate"><span class="pre">--search</span></code> option</p></li>
</ul>
<p>where <cite>$PACKAGE_DIR</cite> is the directory in which the <cite>skoolkit</cite> package is
installed (as shown by <code class="docutils literal notranslate"><span class="pre">skool2html.py</span> <span class="pre">-p</span></code>). When you need a reminder of these
locations, run <code class="docutils literal notranslate"><span class="pre">skool2html.py</span> <span class="pre">-s</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-T</span></code> option sets the CSS theme. For example, if <cite>game.ref</cite> specifies the
CSS files to use thus:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[Game]
StyleSheet=skoolkit.css;game.css
</pre></div>
</div>
<p>then:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2html.py -T dark -T wide game.skool
</pre></div>
</div>
<p>will use the following CSS files, if they exist, in the order listed:</p>
<ul class="simple">
<li><p><cite>skoolkit.css</cite></p></li>
<li><p><cite>skoolkit-dark.css</cite></p></li>
<li><p><cite>skoolkit-wide.css</cite></p></li>
<li><p><cite>game.css</cite></p></li>
<li><p><cite>game-dark.css</cite></p></li>
<li><p><cite>game-wide.css</cite></p></li>
<li><p><cite>dark.css</cite></p></li>
<li><p><cite>wide.css</cite></p></li>
</ul>
<div class="section" id="skool2html-conf">
<span id="id9"></span><h3>Configuration<a class="headerlink" href="#skool2html-conf" title="Permalink to this headline">¶</a></h3>
<p><cite>skool2html.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AsmLabels</span></code> - use ASM labels (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AsmOnePage</span></code> - write all routines and data blocks to a single page (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
or to multiple pages (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - convert addresses and instruction operands to hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>), or leave them as they are (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>),
or leave it as it is (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CreateLabels</span></code> - create default labels for unlabelled instructions (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> - the format of the default label for the first instruction in
a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">L{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> - the format of the default label for an instruction
other than the first in a routine or data block (default: <code class="docutils literal notranslate"><span class="pre">{main}_{index}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JoinCss</span></code> - if specified, concatenate CSS files into a single file with
this name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputDir</span></code> - write files in this directory (default: <code class="docutils literal notranslate"><span class="pre">.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Quiet</span></code> - be quiet (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or verbose (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RebuildAudio</span></code> - overwrite existing audio files (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or leave them
alone (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RebuildImages</span></code> - overwrite existing image files (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or leave them
alone (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Search</span></code> - directory to add to the resource search path; to specify two or
more directories, separate them with commas</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Theme</span></code> - CSS theme to use; to specify two or more themes, separate them
with commas</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span></code> - show timings (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> are standard Python format strings.
<code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the routine or data block as it appears in the
skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the routine or data block as an integer</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> recognises the following replacement fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - the address of the instruction as it appears in the skool file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - 0 for the first unlabelled instruction in the routine or data
block, 1 for the second, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> - the address of the instruction as an integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> - the label of the first instruction in the routine or data block</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[skool2html]</span></code> section. For
example, to make <cite>skool2html.py</cite> use ASM labels and write the disassembly in
hexadecimal by default (without having to use the <code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-a</span></code> options on
the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[skool2html]
AsmLabels=1
Base=16
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--rebuild-audio</span></code> option and the <code class="docutils literal notranslate"><span class="pre">RebuildAudio</span></code>
configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>8.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">EntryLabel</span></code> and <code class="docutils literal notranslate"><span class="pre">EntryPointLabel</span></code> configuration
parameters</p></td>
</tr>
<tr class="row-even"><td><p>7.0</p></td>
<td><p>Writes a single disassembly from the skool file given by the
first positional argument</p></td>
</tr>
<tr class="row-odd"><td><p>6.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--var</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>5.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--asm-one-page</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.0</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--theme</span></code> option also looks for a CSS file whose base name
matches the theme name</p></td>
</tr>
<tr class="row-even"><td><p>4.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--search</span></code> and <code class="docutils literal notranslate"><span class="pre">--writer</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>4.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--ref-sections</span></code> and <code class="docutils literal notranslate"><span class="pre">--ref-file</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>3.6</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--join-css</span></code> and <code class="docutils literal notranslate"><span class="pre">--search-dirs</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>3.5</p></td>
<td><p>Added support for multiple CSS themes</p></td>
</tr>
<tr class="row-even"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-a</span></code> and <code class="docutils literal notranslate"><span class="pre">-C</span></code> options and the long options</p></td>
</tr>
<tr class="row-odd"><td><p>3.3.2</p></td>
<td><p>Added <cite>$PACKAGE_DIR/resources</cite> to the search path; added the
<code class="docutils literal notranslate"><span class="pre">-p</span></code> and <code class="docutils literal notranslate"><span class="pre">-T</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>3.2</p></td>
<td><p>Added <cite>~/.skoolkit</cite> to the search path</p></td>
</tr>
<tr class="row-odd"><td><p>3.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>3.0.2</p></td>
<td><p>No longer shows timings by default; added the <code class="docutils literal notranslate"><span class="pre">-t</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>2.3.1</p></td>
<td><p>Added support for reading multiple ref files per disassembly</p></td>
</tr>
<tr class="row-even"><td><p>2.2.2</p></td>
<td><p>Added the ability to read a skool file from standard input</p></td>
</tr>
<tr class="row-odd"><td><p>2.2</p></td>
<td><p>No longer writes the Skool Daze and Back to Skool disassemblies
by default; added the <code class="docutils literal notranslate"><span class="pre">-d</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>2.1.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-l</span></code>, <code class="docutils literal notranslate"><span class="pre">-u</span></code>, <code class="docutils literal notranslate"><span class="pre">-D</span></code> and <code class="docutils literal notranslate"><span class="pre">-H</span></code> options</p></td>
</tr>
<tr class="row-odd"><td><p>2.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-o</span></code> and <code class="docutils literal notranslate"><span class="pre">-P</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>1.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="sna2ctl-py">
<span id="id10"></span><h2>sna2ctl.py<a class="headerlink" href="#sna2ctl-py" title="Permalink to this headline">¶</a></h2>
<p><cite>sna2ctl.py</cite> generates a control file for a binary (raw memory) file or a SNA,
SZX or Z80 snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2ctl.py game.z80 &gt; game.ctl
</pre></div>
</div>
<p>Now <cite>game.ctl</cite> can be used by <a class="reference internal" href="#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> to convert <cite>game.z80</cite> into a
skool file split into blocks of code and data.</p>
<p><cite>sna2ctl.py</cite> supports several options; run it with no arguments to see a list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: sna2ctl.py [options] FILE

Generate a control file for a binary (raw memory) file or a SNA, SZX or Z80
snapshot. FILE may be a regular file, or &#39;-&#39; for standard input.

Options:
  -e ADDR, --end ADDR   Stop at this address (default=65536).
  -h, --hex             Write upper case hexadecimal addresses.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -l, --hex-lower       Write lower case hexadecimal addresses.
  -m FILE, --map FILE   Use FILE as a code execution map.
  -o ADDR, --org ADDR   Specify the origin address of a binary file (default:
                        65536 - length).
  -p PAGE, --page PAGE  Specify the page (0-7) of a 128K snapshot to map to
                        49152-65535.
  --show-config         Show configuration parameter values.
  -s ADDR, --start ADDR
                        Start at this address.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>If the input filename does not end with ‘.sna’, ‘.szx’ or ‘.z80’, it is assumed
to be a binary file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-m</span></code> option may be used to specify a code execution map to use when
generating a control file. The supported file formats are:</p>
<ul class="simple">
<li><p>Profiles created by the Fuse emulator</p></li>
<li><p>Code execution logs created by the SpecEmu, Spud and Zero emulators</p></li>
<li><p>Map files created by the SpecEmu and Z80 emulators</p></li>
</ul>
<p>If the file specified by the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option is 8192 bytes long, it is assumed to
be a Z80 map file; if it is 65536 bytes long, it is assumed to be a SpecEmu map
file; otherwise it is assumed to be in one of the other supported formats.</p>
<div class="section" id="sna2ctl-conf">
<span id="id11"></span><h3>Configuration<a class="headerlink" href="#sna2ctl-conf" title="Permalink to this headline">¶</a></h3>
<p><cite>sna2ctl.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> - the name of a file containing a list of allowed words, one
per line; if specified, a string of characters will be marked as text only if
it contains at least one of the words in this file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Hex</span></code> - write addresses in decimal (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default), lower case
hexadecimal (<code class="docutils literal notranslate"><span class="pre">1</span></code>),  or upper case hexadecimal (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextChars</span></code> - characters eligible for being marked as text (default:
letters, digits, space, and the following non-alphanumeric characters:
<code class="docutils literal notranslate"><span class="pre">!&quot;$%&amp;\'()*+,-./:;&lt;=&gt;?[]</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextMinLengthCode</span></code> - the minimum length of a string of characters eligible
for being marked as text in a block identified as code (default: <code class="docutils literal notranslate"><span class="pre">12</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TextMinLengthData</span></code> - the minimum length of a string of characters eligible
for being marked as text in a block identified as data (default: <code class="docutils literal notranslate"><span class="pre">3</span></code>)</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[sna2ctl]</span></code> section. For example,
to make <cite>sna2ctl.py</cite> write upper case hexadecimal addresses by default (without
having to use the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option on the command line), add the following section
to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[sna2ctl]
Hex=2
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> configuration parameter</p></td>
</tr>
<tr class="row-odd"><td><p>7.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>7.0</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="sna2img-py">
<span id="id12"></span><h2>sna2img.py<a class="headerlink" href="#sna2img-py" title="Permalink to this headline">¶</a></h2>
<p><cite>sna2img.py</cite> converts the screenshot or other graphic data in a binary (raw
memory) file, SCR file, skool file, or SNA/SZX/Z80 snapshot into a PNG file.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2img.py game.scr
</pre></div>
</div>
<p>will create a file named <cite>game.png</cite>.</p>
<p>To list the options supported by <cite>sna2img.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: sna2img.py [options] INPUT [OUTPUT]

Convert a Spectrum screenshot or other graphic data into a PNG file. INPUT may
be a binary (raw memory) file, a SCR file, a skool file, or a SNA, SZX or Z80
snapshot.

Options:
  -b, --bfix            Parse a skool file in @bfix mode.
  -B, --binary          Read the input as a binary (raw memory) file.
  -e MACRO, --expand MACRO
                        Expand a #FONT, #SCR, #UDG or #UDGARRAY macro. The &#39;#&#39;
                        prefix may be omitted.
  -f N, --flip N        Flip the image horizontally (N=1), vertically (N=2),
                        or both (N=3).
  -i, --invert          Invert video for cells that are flashing.
  -m src,size,dest, --move src,size,dest
                        Move a block of bytes of the given size from src to
                        dest. This option may be used multiple times.
  -n, --no-animation    Do not animate flashing cells.
  -o X,Y, --origin X,Y  Top-left crop at (X,Y).
  -O ORG, --org ORG     Set the origin address of a binary file (default:
                        65536 minus the length of the file).
  -p a[-b[-c]],[^+]v, --poke a[-b[-c]],[^+]v
                        POKE N,v for N in {a, a+c, a+2c..., b}. Prefix &#39;v&#39;
                        with &#39;^&#39; to perform an XOR operation, or &#39;+&#39; to
                        perform an ADD operation. This option may be used
                        multiple times.
  -r N, --rotate N      Rotate the image 90*N degrees clockwise.
  -s SCALE, --scale SCALE
                        Set the scale of the image (default=1).
  -S WxH, --size WxH    Crop to this width and height (in tiles).
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--binary</span></code> and <code class="docutils literal notranslate"><span class="pre">--org</span></code> options and the ability to
read binary (raw memory) files; the <code class="docutils literal notranslate"><span class="pre">--move</span></code> and <code class="docutils literal notranslate"><span class="pre">--poke</span></code>
options accept hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Added the ability to read skool files; added the <code class="docutils literal notranslate"><span class="pre">--bfix</span></code> and
<code class="docutils literal notranslate"><span class="pre">--move</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>6.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--expand</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.4</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sna2skool-py">
<span id="id13"></span><h2>sna2skool.py<a class="headerlink" href="#sna2skool-py" title="Permalink to this headline">¶</a></h2>
<p><cite>sna2skool.py</cite> converts a binary (raw memory) file or a SNA, SZX or Z80
snapshot into a skool file. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2skool.py game.z80 &gt; game.skool
</pre></div>
</div>
<p>Now <cite>game.skool</cite> can be converted into a browsable HTML disassembly using
<a class="reference internal" href="#skool2html-py"><span class="std std-ref">skool2html.py</span></a>, or into an assembler-ready ASM file using
<a class="reference internal" href="#skool2asm-py"><span class="std std-ref">skool2asm.py</span></a>.</p>
<p><cite>sna2skool.py</cite> supports several options; run it with no arguments to see a
list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: sna2skool.py [options] FILE

Convert a binary (raw memory) file or a SNA, SZX or Z80 snapshot into a skool
file. FILE may be a regular file, or &#39;-&#39; for standard input.

Options:
  -c PATH, --ctl PATH   Specify a control file to use, or a directory from
                        which to read control files. PATH may be &#39;-&#39; for
                        standard input, or &#39;0&#39; to use no control file. This
                        option may be used multiple times.
  -d SIZE, --defb SIZE  Disassemble as DEFB statements of this size.
  -e ADDR, --end ADDR   Stop disassembling at this address (default=65536).
  -H, --hex             Write hexadecimal addresses and operands in the
                        disassembly.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -l, --lower           Write the disassembly in lower case.
  -o ADDR, --org ADDR   Specify the origin address of a binary (.bin) file
                        (default: 65536 - length).
  -p PAGE, --page PAGE  Specify the page (0-7) of a 128K snapshot to map to
                        49152-65535.
  --show-config         Show configuration parameter values.
  -s ADDR, --start ADDR
                        Start disassembling at this address.
  -V, --version         Show SkoolKit version number and exit.
  -w W, --line-width W  Set the maximum line width of the skool file (default:
                        79).
</pre></div>
</div>
<p>If the input filename does not end with ‘.sna’, ‘.szx’ or ‘.z80’, it is assumed
to be a binary file.</p>
<p>By default, any files whose names start with the input filename (minus the
‘.bin’, ‘.sna’, ‘.szx’ or ‘.z80’ suffix, if any) and end with ‘.ctl’ will be
used as <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control files</span></a>.</p>
<div class="section" id="sna2skool-conf">
<span id="id14"></span><h3>Configuration<a class="headerlink" href="#sna2skool-conf" title="Permalink to this headline">¶</a></h3>
<p><cite>sna2skool.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - write addresses and instruction operands in hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CommentWidthMin</span></code> - minimum width of the instruction comment field in the
skool file (default: <code class="docutils literal notranslate"><span class="pre">10</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DefbSize</span></code> - maximum number of bytes in a DEFB statement (default: <code class="docutils literal notranslate"><span class="pre">8</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DefmSize</span></code> - maximum number of characters in a DEFM statement (default:
<code class="docutils literal notranslate"><span class="pre">65</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DefwSize</span></code> - maximum number of words in a DEFW statement (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointRef</span></code> - template used to format the comment for an entry point
with exactly one referrer (default: <code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">entry</span> <span class="pre">point</span> <span class="pre">is</span> <span class="pre">used</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">routine</span>
<span class="pre">at</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntryPointRefs</span></code> - template used to format the comment for an entry point
with two or more referrers (default: <code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">entry</span> <span class="pre">point</span> <span class="pre">is</span> <span class="pre">used</span> <span class="pre">by</span> <span class="pre">the</span>
<span class="pre">routines</span> <span class="pre">at</span> <span class="pre">{refs}</span> <span class="pre">and</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InstructionWidth</span></code> - minimum width of the instruction field in the skool
file (default: <code class="docutils literal notranslate"><span class="pre">13</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LineWidth</span></code> - maximum line width of the skool file (default: <code class="docutils literal notranslate"><span class="pre">79</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ListRefs</span></code> - when to add a comment that lists routine or entry point
referrers: never (<code class="docutils literal notranslate"><span class="pre">0</span></code>), if no other comment is defined at the entry point
(<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or always (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ref</span></code> - template used to format the comment for a routine with exactly one
referrer (default: <code class="docutils literal notranslate"><span class="pre">Used</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">routine</span> <span class="pre">at</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RefFormat</span></code> - template used to format referrers in the <code class="docutils literal notranslate"><span class="pre">{ref}</span></code> and
<code class="docutils literal notranslate"><span class="pre">{refs}</span></code> fields of the <code class="docutils literal notranslate"><span class="pre">Ref</span></code> and <code class="docutils literal notranslate"><span class="pre">Refs</span></code> templates (default:
<code class="docutils literal notranslate"><span class="pre">#R{address}</span></code>); the replacement field <code class="docutils literal notranslate"><span class="pre">address</span></code> is the address of the
referrer formatted as a decimal or hexadecimal number in accordance with the
<code class="docutils literal notranslate"><span class="pre">Base</span></code> and <code class="docutils literal notranslate"><span class="pre">Case</span></code> configuration parameters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Refs</span></code> - template used to format the comment for a routine with two or more
referrers (default: <code class="docutils literal notranslate"><span class="pre">Used</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">routines</span> <span class="pre">at</span> <span class="pre">{refs}</span> <span class="pre">and</span> <span class="pre">{ref}.</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Semicolons</span></code> - block types (<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>,
<code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">w</span></code>) in which comment semicolons are written for instructions that
have no comment (default: <code class="docutils literal notranslate"><span class="pre">c</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Text</span></code> - show ASCII text in the comment fields (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>,
the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timings</span></code> - show instruction timings in the comment fields (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or
don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-b</span></code> - template used to format the title for an untitled ‘b’ block
(default: <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">block</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-c</span></code> - template used to format the title for an untitled ‘c’ block
(default: <code class="docutils literal notranslate"><span class="pre">Routine</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-g</span></code> - template used to format the title for an untitled ‘g’ block
(default: <code class="docutils literal notranslate"><span class="pre">Game</span> <span class="pre">status</span> <span class="pre">buffer</span> <span class="pre">entry</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-i</span></code> - template used to format the title for an untitled ‘i’ block
(default: <code class="docutils literal notranslate"><span class="pre">Ignored</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-s</span></code> - template used to format the title for an untitled ‘s’ block
(default: <code class="docutils literal notranslate"><span class="pre">Unused</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-t</span></code> - template used to format the title for an untitled ‘t’ block
(default: <code class="docutils literal notranslate"><span class="pre">Message</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-u</span></code> - template used to format the title for an untitled ‘u’ block
(default: <code class="docutils literal notranslate"><span class="pre">Unused</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title-w</span></code> - template used to format the title for an untitled ‘w’ block
(default: <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">block</span> <span class="pre">at</span> <span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Wrap</span></code> - disassemble an instruction that wraps around the 64K boundary
(<code class="docutils literal notranslate"><span class="pre">1</span></code>), or don’t (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
</ul>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[sna2skool]</span></code> section. For example,
to make <cite>sna2skool.py</cite> generate hexadecimal skool files with a line width of
120 characters by default (without having to use the <code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-w</span></code> options
on the command line), add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[sna2skool]
Base=16
LineWidth=120
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--defb</span></code> option and the <code class="docutils literal notranslate"><span class="pre">Timings</span></code> configuration
parameter</p></td>
</tr>
<tr class="row-odd"><td><p>8.5</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Wrap</span></code> configuration parameter and the ability to
disassemble an instruction that wraps around the 64K boundary;
added the <code class="docutils literal notranslate"><span class="pre">RefFormat</span></code> configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>8.4</p></td>
<td><p>Changed the default value of the <code class="docutils literal notranslate"><span class="pre">DefmSize</span></code> configuration
parameter from 66 to 65</p></td>
</tr>
<tr class="row-odd"><td><p>8.3</p></td>
<td><p>Added support for reading control files from a directory
(<code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">DIR</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>8.1</p></td>
<td><p>Added support for ignoring default control files (<code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">0</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>8.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">DefwSize</span></code> configuration parameter</p></td>
</tr>
<tr class="row-even"><td><p>7.1</p></td>
<td><p>Added support for reading multiple default control files, and for
using the <code class="docutils literal notranslate"><span class="pre">--ctl</span></code> option multiple times; added the
<code class="docutils literal notranslate"><span class="pre">CommentWidthMin</span></code>, <code class="docutils literal notranslate"><span class="pre">InstructionWidth</span></code> and <code class="docutils literal notranslate"><span class="pre">Semicolons</span></code>
configuration parameters</p></td>
</tr>
<tr class="row-odd"><td><p>7.0</p></td>
<td><p>The short option for <code class="docutils literal notranslate"><span class="pre">--lower</span></code> is <code class="docutils literal notranslate"><span class="pre">-l</span></code>; the long option for
<code class="docutils literal notranslate"><span class="pre">-H</span></code> is <code class="docutils literal notranslate"><span class="pre">--hex</span></code></p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> option; the <code class="docutils literal notranslate"><span class="pre">--end</span></code>, <code class="docutils literal notranslate"><span class="pre">--org</span></code> and
<code class="docutils literal notranslate"><span class="pre">--start</span></code> options accept a hexadecimal integer prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>6.1</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>4.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--end</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>4.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--line-width</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>3.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option and the long options, and the ability to
add a comment listing referrers at every routine entry point</p></td>
</tr>
<tr class="row-odd"><td><p>3.3</p></td>
<td><p>Added the ability to read 128K SNA snapshots</p></td>
</tr>
<tr class="row-even"><td><p>3.2</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option, and the ability to read SZX snapshots
and 128K Z80 snapshots</p></td>
</tr>
<tr class="row-odd"><td><p>2.1.2</p></td>
<td><p>Added the ability to write the disassembly in lower case</p></td>
</tr>
<tr class="row-even"><td><p>2.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-H</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>2.0.1</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-o</span></code> option, and the ability to read binary files, to
set the maximum number of characters in a DEFM statement, and to
suppress comments that list routine entry point referrers</p></td>
</tr>
<tr class="row-even"><td><p>2.0</p></td>
<td><p>Added the ability to set the maximum number of bytes in a DEFB
statement</p></td>
</tr>
<tr class="row-odd"><td><p>1.0.5</p></td>
<td><p>Added the ability to show ASCII text in comment fields</p></td>
</tr>
<tr class="row-even"><td><p>1.0.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="snapinfo-py">
<span id="id15"></span><h2>snapinfo.py<a class="headerlink" href="#snapinfo-py" title="Permalink to this headline">¶</a></h2>
<p><cite>snapinfo.py</cite> shows information on the registers or RAM in a binary (raw
memory) file or a SNA, SZX or Z80 snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapinfo.py game.z80
</pre></div>
</div>
<p>To list the options supported by <cite>snapinfo.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: snapinfo.py [options] file

Analyse a binary (raw memory) file or a SNA, SZX or Z80 snapshot.

Options:
  -b, --basic           List the BASIC program.
  -c PATH, --ctl PATH   When generating a call graph, specify a control file
                        to use, or a directory from which to read control
                        files. PATH may be &#39;-&#39; for standard input. This option
                        may be used multiple times.
  -f A[,B...[-M[-N]]], --find A[,B...[-M[-N]]]
                        Search for the byte sequence A,B... with distance
                        ranging from M to N (default=1) between bytes.
  -g, --call-graph      Generate a call graph in DOT format.
  -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
                        &#39;v&#39;. This option may be used multiple times.
  -o ADDR, --org ADDR   Specify the origin address of a binary (raw memory)
                        file (default: 65536 - length).
  -p A[-B[-C]], --peek A[-B[-C]]
                        Show the contents of addresses A TO B STEP C. This
                        option may be used multiple times.
  -P PAGE, --page PAGE  Specify the page (0-7) of a 128K snapshot to map to
                        49152-65535.
  --show-config         Show configuration parameter values.
  -t TEXT, --find-text TEXT
                        Search for a text string.
  -T X,Y[-M[-N]], --find-tile X,Y[-M[-N]]
                        Search for the graphic data of the tile at (X,Y) with
                        distance ranging from M to N (default=1) between
                        bytes.
  -v, --variables       List variables.
  -V, --version         Show SkoolKit version number and exit.
  -w A[-B[-C]], --word A[-B[-C]]
                        Show the words at addresses A TO B STEP C. This option
                        may be used multiple times.
</pre></div>
</div>
<p>With no options, <cite>snapinfo.py</cite> displays register values, the interrupt mode,
and the border colour. By using one of the options shown above, it can list
the BASIC program and variables (if present), show the contents of a range of
addresses, search the RAM for a sequence of byte values or a text string, or
generate a call graph.</p>
<div class="section" id="call-graphs">
<span id="snapinfo-call-graph"></span><h3>Call graphs<a class="headerlink" href="#call-graphs" title="Permalink to this headline">¶</a></h3>
<p><cite>snapinfo.py</cite> can generate a call graph in <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/lang.html">DOT format</a> from a snapshot and a
corresponding control file. For example, if <cite>game.ctl</cite> is present alongside
<cite>game.z80</cite>, then:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapinfo.py -g game.z80 &gt; game.dot
</pre></div>
</div>
<p>will produce a call graph in <cite>game.dot</cite>, with a node for each routine declared
in <cite>game.ctl</cite>, and an edge between two nodes whenever the routine represented
by the first node calls, jumps to, or continues into the routine represented by
the second node.</p>
<p>To create a PNG image file named <cite>game.png</cite> from <cite>game.dot</cite>, the <cite>dot</cite> utility
(included in <a class="reference external" href="https://graphviz.gitlab.io/">Graphviz</a>) may be used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dot -Tpng game.dot &gt; game.png
</pre></div>
</div>
<p>A call graph may contain one or more ‘orphans’, an orphan being a node that is
not at the head of any arrow, and thus represents a routine that is (as far as
<cite>snapinfo.py</cite> can tell) not used by any other routines. To declare the callers
of such a routine (in case it is not a true orphan), the <a class="reference internal" href="asm.html#refs"><span class="std std-ref">&#64;refs</span></a> directive
may be used.</p>
<p>To help identify orphan nodes and missing edges, each of the first three lines
of the DOT file produced by <cite>snapinfo.py</cite> contains a list of IDs of the
following types of node:</p>
<ul class="simple">
<li><p>unconnected nodes</p></li>
<li><p>orphan nodes connected to other nodes</p></li>
<li><p>non-orphan nodes whose first instruction is not used</p></li>
</ul>
<p>The appearance of nodes and edges in a call graph image can be configured via
the <code class="docutils literal notranslate"><span class="pre">EdgeAttributes</span></code>, <code class="docutils literal notranslate"><span class="pre">GraphAttributes</span></code>, <code class="docutils literal notranslate"><span class="pre">NodeAttributes</span></code> and
<code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> configuration parameters (see below).</p>
</div>
<div class="section" id="snapinfo-conf">
<span id="id16"></span><h3>Configuration<a class="headerlink" href="#snapinfo-conf" title="Permalink to this headline">¶</a></h3>
<p><cite>snapinfo.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
configuration parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">EdgeAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/attrs.html">attributes</a> for edges in a call graph
(default: none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GraphAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/attrs.html">attributes</a> for a call graph (default:
none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/attrs.html">attributes</a> for nodes in a call graph
(default: <code class="docutils literal notranslate"><span class="pre">shape=record</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeId</span></code> - the format of the node IDs in a call graph (default:
<code class="docutils literal notranslate"><span class="pre">{address}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> - the format of the node labels in a call graph (default:
<code class="docutils literal notranslate"><span class="pre">&quot;{address}</span> <span class="pre">{address:04X}\n{label}&quot;</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Peek</span></code> - the format of each line of the output produced by the <code class="docutils literal notranslate"><span class="pre">--peek</span></code>
option (default:
<code class="docutils literal notranslate"><span class="pre">{address:&gt;5}</span> <span class="pre">{address:04X}:</span> <span class="pre">{value:&gt;3}</span>&#160; <span class="pre">{value:02X}</span>&#160; <span class="pre">{value:08b}</span>&#160; <span class="pre">{char}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Word</span></code> - the format of each line of the output produced by the <code class="docutils literal notranslate"><span class="pre">--word</span></code>
option (default: <code class="docutils literal notranslate"><span class="pre">{address:&gt;5}</span> <span class="pre">{address:04X}:</span> <span class="pre">{value:&gt;5}</span>&#160; <span class="pre">{value:04X}</span></code>)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">NodeId</span></code> and <code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> are standard Python format strings that recognise
the replacement fields <code class="docutils literal notranslate"><span class="pre">address</span></code> and <code class="docutils literal notranslate"><span class="pre">label</span></code> (the address and label of the
first instruction in the routine represented by the node).</p>
<p>Configuration parameters must appear in a <code class="docutils literal notranslate"><span class="pre">[snapinfo]</span></code> section. For example,
to make <cite>snapinfo.py</cite> use open arrowheads and a cyan background colour in call
graphs by default, add the following section to <cite>skoolkit.ini</cite>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[snapinfo]
EdgeAttributes=arrowhead=open
GraphAttributes=bgcolor=cyan
</pre></div>
</div>
<p>Configuration parameters may also be set on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--ini</span></code> option. Parameter values set this way will override any found in
<cite>skoolkit.ini</cite>.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">Peek</span></code> and <code class="docutils literal notranslate"><span class="pre">Word</span></code> configuration parameters</p></td>
</tr>
<tr class="row-odd"><td><p>8.3</p></td>
<td><p>Added support for reading control files from a directory
(<code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">DIR</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>8.2</p></td>
<td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
ability to read binary files; added the <code class="docutils literal notranslate"><span class="pre">--call-graph</span></code>,
<code class="docutils literal notranslate"><span class="pre">--ctl</span></code>, <code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--org</span></code>, <code class="docutils literal notranslate"><span class="pre">--page</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code>
options</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--find</span></code>, <code class="docutils literal notranslate"><span class="pre">--find-tile</span></code>, <code class="docutils literal notranslate"><span class="pre">--peek</span></code> and <code class="docutils literal notranslate"><span class="pre">--word</span></code>
options accept hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>6.0</p></td>
<td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--find</span></code> option for distance ranges; added
the <code class="docutils literal notranslate"><span class="pre">--find-tile</span></code> and <code class="docutils literal notranslate"><span class="pre">--word</span></code> options; the <code class="docutils literal notranslate"><span class="pre">--peek</span></code> option
shows UDGs and BASIC tokens</p></td>
</tr>
<tr class="row-odd"><td><p>5.4</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--variables</span></code> option; UDGs in a BASIC program are
shown as special symbols (e.g. <code class="docutils literal notranslate"><span class="pre">{UDG-A}</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>5.3</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="snapmod-py">
<span id="id17"></span><h2>snapmod.py<a class="headerlink" href="#snapmod-py" title="Permalink to this headline">¶</a></h2>
<p><cite>snapmod.py</cite> modifies the registers and RAM in a 48K Z80 snapshot. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapmod.py --poke 32768,0 game.z80 poked.z80
</pre></div>
</div>
<p>To list the options supported by <cite>snapmod.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: snapmod.py [options] in.z80 [out.z80]

Modify a 48K Z80 snapshot.

Options:
  -f, --force           Overwrite an existing snapshot.
  -m src,size,dest, --move src,size,dest
                        Move a block of bytes of the given size from src to
                        dest. This option may be used multiple times.
  -p a[-b[-c]],[^+]v, --poke a[-b[-c]],[^+]v
                        POKE N,v for N in {a, a+c, a+2c..., b}. Prefix &#39;v&#39;
                        with &#39;^&#39; to perform an XOR operation, or &#39;+&#39; to
                        perform an ADD operation. This option may be used
                        multiple times.
  -r name=value, --reg name=value
                        Set the value of a register. Do &#39;--reg help&#39; for more
                        information. This option may be used multiple times.
  -s name=value, --state name=value
                        Set a hardware state attribute. Do &#39;--state help&#39; for
                        more information. This option may be used multiple
                        times.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--move</span></code>, <code class="docutils literal notranslate"><span class="pre">--poke</span></code> and <code class="docutils literal notranslate"><span class="pre">--reg</span></code> options accept
hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>5.3</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tap2sna-py">
<span id="id18"></span><h2>tap2sna.py<a class="headerlink" href="#tap2sna-py" title="Permalink to this headline">¶</a></h2>
<p><cite>tap2sna.py</cite> converts a TAP or TZX file (which may be inside a zip archive)
into a Z80 snapshot. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py game.tap game.z80
</pre></div>
</div>
<p>To list the options supported by <cite>tap2sna.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage:
  tap2sna.py [options] INPUT snapshot.z80
  tap2sna.py @FILE

Convert a TAP or TZX file (which may be inside a zip archive) into a Z80
snapshot. INPUT may be the full URL to a remote zip archive or TAP/TZX file,
or the path to a local file. Arguments may be read from FILE instead of (or as
well as) being given on the command line.

Options:
  -d DIR, --output-dir DIR
                        Write the snapshot file in this directory.
  -f, --force           Overwrite an existing snapshot.
  -p STACK, --stack STACK
                        Set the stack pointer.
  --ram OPERATION       Perform a load operation or otherwise modify the
                        memory snapshot being built. Do &#39;--ram help&#39; for more
                        information. This option may be used multiple times.
  --reg name=value      Set the value of a register. Do &#39;--reg help&#39; for more
                        information. This option may be used multiple times.
  -s START, --start START
                        Set the start address to JP to.
  --sim-load            Simulate a 48K ZX Spectrum running LOAD &quot;&quot;.
  --state name=value    Set a hardware state attribute. Do &#39;--state help&#39; for
                        more information. This option may be used multiple
                        times.
  -u AGENT, --user-agent AGENT
                        Set the User-Agent header.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<p>Note that support for TZX files is limited to block types 0x10 (standard speed
data), 0x11 (turbo speed data) and 0x14 (pure data).</p>
<p>By default, <cite>tap2sna.py</cite> loads bytes from every data block on the tape, using
the start address given in the corresponding header. For tapes that contain
headerless data blocks, headers with incorrect start addresses, or irrelevant
blocks, the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option can be used to load bytes from specific blocks at
the appropriate addresses. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --ram load=3,30000 game.tzx game.z80
</pre></div>
</div>
<p>loads the third block on the tape at address 30000, and ignores all other
blocks. (To see information on the blocks in a TAP or TZX file, use the
<a class="reference internal" href="#tapinfo-py"><span class="std std-ref">tapinfo.py</span></a> command.)</p>
<p>An alternative to the <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">load</span></code> approach is the <code class="docutils literal notranslate"><span class="pre">--sim-load</span></code> option. It
simulates a freshly booted 48K ZX Spectrum running LOAD “” (or LOAD “”CODE, if
the first block on the tape is a ‘Bytes’ header). Whenever the Spectrum ROM’s
load routine at $0556 is called, a shortcut is taken by fast loading the next
block on the tape. All other code (including any custom loader) is fully
simulated. Simulation continues until the program counter hits the start
address given by the <code class="docutils literal notranslate"><span class="pre">--start</span></code> option, or 10 minutes of simulated Z80 CPU
time has elapsed, or the end of the tape is reached and one of the following
conditions is satisfied:</p>
<ul class="simple">
<li><p>a custom loader was detected</p></li>
<li><p>the program counter hits an address outside the ROM</p></li>
<li><p>more than one second of simulated Z80 CPU time has elapsed since the end of
the tape was reached</p></li>
</ul>
<p>The simulation can also be aborted by pressing Ctrl-C. When a simulated LOAD
has completed or been aborted, the values of the registers (including the
program counter) in the simulator are used to populate the Z80 snapshot.</p>
<p>In addition to loading specific blocks, the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option can also be used
to move blocks of bytes from one location to another, POKE values into
individual addresses or address ranges, modify memory with XOR and ADD
operations, initialise the system variables, or call a Python function to
modify the memory snapshot in an arbitrary way before it is saved. For more
information on these operations, run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --ram help
</pre></div>
</div>
<p>For complex snapshots that require many options to build, it may be more
convenient to store the arguments to <cite>tap2sna.py</cite> in a file. For example, if
the file <cite>game.t2s</cite> has the following contents:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>;
; tap2sna.py file for GAME
;
http://example.com/pub/games/GAME.zip
game.z80
--ram load=4,32768         # Load the fourth block at 32768
--ram move=40960,512,43520 # Move 40960-41471 to 43520-44031
--ram call=:ram.modify     # Call modify(snapshot) in ./ram.py
--ram sysvars              # Initialise the system variables
--state iff=0              # Disable interrupts
--stack 32768              # Stack at 32768
--start 34816              # Start at 34816
</pre></div>
</div>
<p>then:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py @game.t2s
</pre></div>
</div>
<p>will create <cite>game.z80</cite> as if the arguments specified in <cite>game.t2s</cite> had been
given on the command line.</p>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.7</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--sim-load</span></code> option; when a headerless block is
ignored because no <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">load</span></code> options have been specified, a
warning is printed</p></td>
</tr>
<tr class="row-odd"><td><p>8.6</p></td>
<td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">call</span></code> operation</p></td>
</tr>
<tr class="row-even"><td><p>8.4</p></td>
<td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">sysvars</span></code>
operation</p></td>
</tr>
<tr class="row-odd"><td><p>6.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--user-agent</span></code> option</p></td>
</tr>
<tr class="row-even"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--ram</span></code>, <code class="docutils literal notranslate"><span class="pre">--reg</span></code>, <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options
accept hexadecimal integers prefixed by ‘0x’</p></td>
</tr>
<tr class="row-odd"><td><p>5.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options</p></td>
</tr>
<tr class="row-even"><td><p>4.5</p></td>
<td><p>Added support for TZX block type 0x14 (pure data), for loading
the first and last bytes of a tape block, and for modifying
memory with XOR and ADD operations</p></td>
</tr>
<tr class="row-odd"><td><p>3.5</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tapinfo-py">
<span id="id19"></span><h2>tapinfo.py<a class="headerlink" href="#tapinfo-py" title="Permalink to this headline">¶</a></h2>
<p><cite>tapinfo.py</cite> shows information on the blocks in a TAP or TZX file. For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tapinfo.py game.tzx
</pre></div>
</div>
<p>To list the options supported by <cite>tapinfo.py</cite>, run it with no arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: tapinfo.py FILE

Show the blocks in a TAP or TZX file.

Options:
  -b IDs, --tzx-blocks IDs
                        Show TZX blocks with these IDs only. &#39;IDs&#39; is a comma-
                        separated list of hexadecimal block IDs, e.g.
                        10,11,2a.
  -B N[,A], --basic N[,A]
                        List the BASIC program in block N loaded at address A
                        (default 23755).
  -d, --data            Show the entire contents of header and data blocks.
  -V, --version         Show SkoolKit version number and exit.
</pre></div>
</div>
<table class="docutils colwidths-auto align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Changes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.3</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--data</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>8.1</p></td>
<td><p>Shows contents of TZX block types 0x33 (hardware type) and 0x35
(custom info)</p></td>
</tr>
<tr class="row-even"><td><p>7.1</p></td>
<td><p>Shows pulse lengths in TZX block type 0x13 and full info for TZX
block type 0x14</p></td>
</tr>
<tr class="row-odd"><td><p>6.2</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option accepts a hexadecimal address prefixed by
‘0x’</p></td>
</tr>
<tr class="row-even"><td><p>6.0</p></td>
<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>5.0</p></td>
<td><p>New</p></td>
</tr>
</tbody>
</table>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Commands</a><ul>
<li><a class="reference internal" href="#bin2sna-py">bin2sna.py</a></li>
<li><a class="reference internal" href="#bin2tap-py">bin2tap.py</a></li>
<li><a class="reference internal" href="#skool2asm-py">skool2asm.py</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#skool2bin-py">skool2bin.py</a></li>
<li><a class="reference internal" href="#skool2ctl-py">skool2ctl.py</a><ul>
<li><a class="reference internal" href="#skool2ctl-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#skool2html-py">skool2html.py</a><ul>
<li><a class="reference internal" href="#skool2html-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sna2ctl-py">sna2ctl.py</a><ul>
<li><a class="reference internal" href="#sna2ctl-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sna2img-py">sna2img.py</a></li>
<li><a class="reference internal" href="#sna2skool-py">sna2skool.py</a><ul>
<li><a class="reference internal" href="#sna2skool-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#snapinfo-py">snapinfo.py</a><ul>
<li><a class="reference internal" href="#call-graphs">Call graphs</a></li>
<li><a class="reference internal" href="#snapinfo-conf">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#snapmod-py">snapmod.py</a></li>
<li><a class="reference internal" href="#tap2sna-py">tap2sna.py</a></li>
<li><a class="reference internal" href="#tapinfo-py">tapinfo.py</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="diy.html"
                        title="previous chapter">Disassembly DIY</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="assemblers.html"
                        title="next chapter">Supported assemblers</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/commands.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="assemblers.html" title="Supported assemblers"
             >next</a> |</li>
        <li class="right" >
          <a href="diy.html" title="Disassembly DIY"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 8.7 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Commands</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Richard Dymond.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>